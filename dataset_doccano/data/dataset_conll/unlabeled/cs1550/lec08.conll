unlabeled|cs1550|lec08
-DOCSTART- -X- -X- O

Introduction _ _ O
to _ _ O
Operating _ _ O
Systems _ _ O
CS _ _ O
/ _ _ O
COE _ _ O
1550 _ _ O
Spring _ _ O
2022 _ _ O
Sherif _ _ O
Khattab _ _ O
ksm73@pitt.edu _ _ O
( _ _ O
Some _ _ O
slides _ _ O
are _ _ O
from _ _ O
Silberschatz _ _ O
, _ _ O
Galvin _ _ O
and _ _ O
Gagne _ _ O
© _ _ O
2013 _ _ O
) _ _ O

Announcements _ _ O
• _ _ O
Upcoming _ _ O
deadlines _ _ O
• _ _ O
Homework _ _ O
4 _ _ O
is _ _ O
due _ _ O
next _ _ O
Monday _ _ O
2 _ _ O
/ _ _ O
14 _ _ O
• _ _ O
Project _ _ O
1 _ _ O
due _ _ O
on _ _ O
2 _ _ O
/ _ _ O
18 _ _ O
CS _ _ O
/ _ _ O
COE _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
2 _ _ O

Previous _ _ O
lecture _ _ O
… _ _ O
• _ _ O
It _ _ O
is _ _ O
easy _ _ O
to _ _ O
make _ _ O
mistakes _ _ O
when _ _ O
using _ _ O
semaphores _ _ O
• _ _ O
Solution _ _ O
: _ _ O
Mutex _ _ O
and _ _ O
Condition _ _ O
Variables _ _ O
CS _ _ O
/ _ _ O
COE _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
3 _ _ O

Muddiest _ _ O
Points _ _ O
CS _ _ O
/ _ _ O
COE _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
4 _ _ O

Problem _ _ O
of _ _ O
the _ _ O
Day _ _ O
Readers _ _ O
& _ _ O
Writers _ _ O
• _ _ O
Many _ _ O
processes _ _ O
that _ _ O
may _ _ O
read _ _ O
and/or _ _ O
write _ _ O
• _ _ O
Only _ _ O
one _ _ O
writer _ _ O
allowed _ _ O
at _ _ O
any _ _ O
time _ _ O
• _ _ O
Many _ _ O
readers _ _ O
allowed _ _ O
, _ _ O
but _ _ O
not _ _ O
while _ _ O
a _ _ O
process _ _ O
is _ _ O
writing _ _ O
• _ _ O
Real-world _ _ O
Applications _ _ O
• _ _ O
Database _ _ O
queries _ _ O
• _ _ O
We _ _ O
have _ _ O
this _ _ O
problem _ _ O
in _ _ O
Project _ _ O
1 _ _ O
CS _ _ O
/ _ _ O
COE _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
5 _ _ O

Semaphore-based _ _ O
Solution _ _ O
Shared _ _ O
variables _ _ O
int _ _ O
nreaders _ _ O
; _ _ O
Semaphore _ _ O
mutex _ _ O
( _ _ O
1 _ _ O
) _ _ O
, _ _ O
writing _ _ O
( _ _ O
1 _ _ O
) _ _ O
; _ _ O
Reader _ _ O
process _ _ O
Writer _ _ O
process _ _ O
… _ _ O
mutex.down _ _ O
( _ _ O
) _ _ O
; _ _ O
nreaders _ _ O
+ _ _ O
= _ _ O
1 _ _ O
; _ _ O
if _ _ O
( _ _ O
nreaders _ _ O
= _ _ O
= _ _ O
1 _ _ O
) _ _ O
/ _ _ O
/ _ _ O
wait _ _ O
if _ _ O
writing.down _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
1st _ _ O
reader _ _ O
mutex.up _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
Read _ _ O
some _ _ O
stuff _ _ O
mutex.down _ _ O
( _ _ O
) _ _ O
; _ _ O
nreaders _ _ O
-= _ _ O
1 _ _ O
; _ _ O
if _ _ O
( _ _ O
nreaders _ _ O
= _ _ O
= _ _ O
0 _ _ O
) _ _ O
/ _ _ O
/ _ _ O
signal _ _ O
if _ _ O
writing.up _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
last _ _ O
reader _ _ O
mutex.up _ _ O
( _ _ O
) _ _ O
; _ _ O
… _ _ O
… _ _ O
writing.down _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
Write _ _ O
some _ _ O
stuff _ _ O
writing.up _ _ O
( _ _ O
) _ _ O
; _ _ O
… _ _ O
CS _ _ O
/ _ _ O
COE _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
6 _ _ O

Solution _ _ O
Tracing _ _ O
• _ _ O
enterRead _ _ O
Reader _ _ O
process _ _ O
… _ _ O
mutex.down _ _ O
( _ _ O
) _ _ O
; _ _ O
nreaders _ _ O
+ _ _ O
= _ _ O
1 _ _ O
; _ _ O
if _ _ O
( _ _ O
nreaders _ _ O
= _ _ O
= _ _ O
1 _ _ O
) _ _ O
/ _ _ O
/ _ _ O
wait _ _ O
if _ _ O
writing.down _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
1st _ _ O
reader _ _ O
mutex.up _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
Read _ _ O
some _ _ O
stuff _ _ O
mutex.down _ _ O
( _ _ O
) _ _ O
; _ _ O
nreaders _ _ O
-= _ _ O
1 _ _ O
; _ _ O
if _ _ O
( _ _ O
nreaders _ _ O
= _ _ O
= _ _ O
0 _ _ O
) _ _ O
/ _ _ O
/ _ _ O
signal _ _ O
if _ _ O
writing.up _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
last _ _ O
reader _ _ O
mutex.up _ _ O
( _ _ O
) _ _ O
; _ _ O
… _ _ O
CS _ _ O
/ _ _ O
COE _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
7 _ _ O

Solution _ _ O
Tracing _ _ O
• _ _ O
read _ _ O
Reader _ _ O
process _ _ O
… _ _ O
mutex.down _ _ O
( _ _ O
) _ _ O
; _ _ O
nreaders _ _ O
+ _ _ O
= _ _ O
1 _ _ O
; _ _ O
if _ _ O
( _ _ O
nreaders _ _ O
= _ _ O
= _ _ O
1 _ _ O
) _ _ O
/ _ _ O
/ _ _ O
wait _ _ O
if _ _ O
writing.down _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
1st _ _ O
reader _ _ O
mutex.up _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
Read _ _ O
some _ _ O
stuff _ _ O
mutex.down _ _ O
( _ _ O
) _ _ O
; _ _ O
nreaders _ _ O
-= _ _ O
1 _ _ O
; _ _ O
if _ _ O
( _ _ O
nreaders _ _ O
= _ _ O
= _ _ O
0 _ _ O
) _ _ O
/ _ _ O
/ _ _ O
signal _ _ O
if _ _ O
writing.up _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
last _ _ O
reader _ _ O
mutex.up _ _ O
( _ _ O
) _ _ O
; _ _ O
… _ _ O
CS _ _ O
/ _ _ O
COE _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
8 _ _ O

Solution _ _ O
Tracing _ _ O
• _ _ O
doneRead _ _ O
Reader _ _ O
process _ _ O
… _ _ O
mutex.down _ _ O
( _ _ O
) _ _ O
; _ _ O
nreaders _ _ O
+ _ _ O
= _ _ O
1 _ _ O
; _ _ O
if _ _ O
( _ _ O
nreaders _ _ O
= _ _ O
= _ _ O
1 _ _ O
) _ _ O
/ _ _ O
/ _ _ O
wait _ _ O
if _ _ O
writing.down _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
1st _ _ O
reader _ _ O
mutex.up _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
Read _ _ O
some _ _ O
stuff _ _ O
mutex.down _ _ O
( _ _ O
) _ _ O
; _ _ O
nreaders _ _ O
-= _ _ O
1 _ _ O
; _ _ O
if _ _ O
( _ _ O
nreaders _ _ O
= _ _ O
= _ _ O
0 _ _ O
) _ _ O
/ _ _ O
/ _ _ O
signal _ _ O
if _ _ O
writing.up _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
last _ _ O
reader _ _ O
mutex.up _ _ O
( _ _ O
) _ _ O
; _ _ O
… _ _ O
CS _ _ O
/ _ _ O
COE _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
9 _ _ O

Writer _ _ O
Events _ _ O
• _ _ O
enterWrite _ _ O
Writer _ _ O
process _ _ O
… _ _ O
writing.down _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
Write _ _ O
some _ _ O
stuff _ _ O
writing.up _ _ O
( _ _ O
) _ _ O
; _ _ O
… _ _ O
CS _ _ O
/ _ _ O
COE _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
10 _ _ O

Writer _ _ O
Events _ _ O
• _ _ O
write _ _ O
Writer _ _ O
process _ _ O
… _ _ O
writing.down _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
Write _ _ O
some _ _ O
stuff _ _ O
writing.up _ _ O
( _ _ O
) _ _ O
; _ _ O
… _ _ O
CS _ _ O
/ _ _ O
COE _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
11 _ _ O

Writer _ _ O
Events _ _ O
• _ _ O
doneWrite _ _ O
Writer _ _ O
process _ _ O
… _ _ O
writing.down _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
Write _ _ O
some _ _ O
stuff _ _ O
writing.up _ _ O
( _ _ O
) _ _ O
; _ _ O
… _ _ O
CS _ _ O
/ _ _ O
COE _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
12 _ _ O

Sequence _ _ O
1 _ _ O
• _ _ O
W0 _ _ O
enterWrite _ _ O
Reader _ _ O
process _ _ O
• _ _ O
W0 _ _ O
write _ _ O
… _ _ O
mutex.down _ _ O
( _ _ O
) _ _ O
; _ _ O
nreaders _ _ O
+ _ _ O
= _ _ O
1 _ _ O
; _ _ O
if _ _ O
( _ _ O
nreaders _ _ O
= _ _ O
= _ _ O
1 _ _ O
) _ _ O
/ _ _ O
/ _ _ O
wait _ _ O
if _ _ O
writing.down _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
1st _ _ O
reader _ _ O
mutex.up _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
Read _ _ O
some _ _ O
stuff _ _ O
mutex.down _ _ O
( _ _ O
) _ _ O
; _ _ O
nreaders _ _ O
-= _ _ O
1 _ _ O
; _ _ O
if _ _ O
( _ _ O
nreaders _ _ O
= _ _ O
= _ _ O
0 _ _ O
) _ _ O
/ _ _ O
/ _ _ O
signal _ _ O
if _ _ O
writing.up _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
last _ _ O
reader _ _ O
mutex.up _ _ O
( _ _ O
) _ _ O
; _ _ O
… _ _ O
• _ _ O
R0 _ _ O
enterRead _ _ O
• _ _ O
R1 _ _ O
enterRead _ _ O
• _ _ O
R2 _ _ O
enterRead _ _ O
• _ _ O
W0 _ _ O
doneWrite _ _ O
• _ _ O
R2 _ _ O
read _ _ O
• _ _ O
W1 _ _ O
enterWrite _ _ O
• _ _ O
R2 _ _ O
doneRead _ _ O
• _ _ O
W1 _ _ O
write _ _ O
Writer _ _ O
process _ _ O
… _ _ O
writing.down _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
Write _ _ O
some _ _ O
stuff _ _ O
writing.up _ _ O
( _ _ O
) _ _ O
; _ _ O
… _ _ O
CS _ _ O
/ _ _ O
COE _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
13 _ _ O

• _ _ O
• _ _ O
• _ _ O
• _ _ O
• _ _ O
• _ _ O
• _ _ O
• _ _ O
• _ _ O
• _ _ O
• _ _ O
• _ _ O
Sequence _ _ O
2 _ _ O
R0 _ _ O
enterRead _ _ O
R0 _ _ O
read _ _ O
R1 _ _ O
enterRead _ _ O
R1 _ _ O
read _ _ O
W0 _ _ O
enterWrite _ _ O
R2 _ _ O
enterRead _ _ O
R2 _ _ O
read _ _ O
R2 _ _ O
doneRead _ _ O
R1 _ _ O
doneRead _ _ O
R0 _ _ O
doneRead _ _ O
W0 _ _ O
write _ _ O
W0 _ _ O
doneWrite _ _ O
Reader _ _ O
process _ _ O
… _ _ O
mutex.down _ _ O
( _ _ O
) _ _ O
; _ _ O
nreaders _ _ O
+ _ _ O
= _ _ O
1 _ _ O
; _ _ O
if _ _ O
( _ _ O
nreaders _ _ O
= _ _ O
= _ _ O
1 _ _ O
) _ _ O
/ _ _ O
/ _ _ O
wait _ _ O
if _ _ O
writing.down _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
1st _ _ O
reader _ _ O
mutex.up _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
Read _ _ O
some _ _ O
stuff _ _ O
mutex.down _ _ O
( _ _ O
) _ _ O
; _ _ O
nreaders _ _ O
-= _ _ O
1 _ _ O
; _ _ O
if _ _ O
( _ _ O
nreaders _ _ O
= _ _ O
= _ _ O
0 _ _ O
) _ _ O
/ _ _ O
/ _ _ O
signal _ _ O
if _ _ O
writing.up _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
last _ _ O
reader _ _ O
mutex.up _ _ O
( _ _ O
) _ _ O
; _ _ O
… _ _ O
Writer _ _ O
process _ _ O
… _ _ O
writing.down _ _ O
( _ _ O
) _ _ O
; _ _ O
/ _ _ O
/ _ _ O
Write _ _ O
some _ _ O
stuff _ _ O
writing.up _ _ O
( _ _ O
) _ _ O
; _ _ O
… _ _ O
CS _ _ O
/ _ _ O
COE _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
14 _ _ O

Solution _ _ O
using _ _ O
Mutex _ _ O
and _ _ O
Condition _ _ O
Variables _ _ O
CS _ _ O
/ _ _ O
COE _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
15 _ _ O



