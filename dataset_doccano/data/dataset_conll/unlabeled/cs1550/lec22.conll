unlabeled|cs1550|lec22
-DOCSTART- -X- -X- O

Introduction _ _ O
to _ _ O
Operating _ _ O
Systems _ _ O
CS _ _ O
1550 _ _ O
Spring _ _ O
2022 _ _ O
Sherif _ _ O
Khattab _ _ O
ksm73@pitt.edu _ _ O
( _ _ O
Some _ _ O
slides _ _ O
are _ _ O
from _ _ O
Silberschatz _ _ O
, _ _ O
Galvin _ _ O
and _ _ O
Gagne _ _ O
© _ _ O
2013 _ _ O
) _ _ O

Announcements _ _ O
• _ _ O
Upcoming _ _ O
deadlines _ _ O
: _ _ O
• _ _ O
Homework _ _ O
10 _ _ O
: _ _ O
due _ _ O
on _ _ O
4 _ _ O
/ _ _ O
11 _ _ O
• _ _ O
Project _ _ O
3 _ _ O
: _ _ O
due _ _ O
on _ _ O
4 _ _ O
/ _ _ O
11 _ _ O
• _ _ O
Lab _ _ O
4 _ _ O
: _ _ O
due _ _ O
on _ _ O
4 _ _ O
/ _ _ O
15 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
2 _ _ O

Previous _ _ O
Lecture _ _ O
… _ _ O
• _ _ O
Indexed _ _ O
Allocation _ _ O
• _ _ O
Directory _ _ O
contents _ _ O
• _ _ O
Free _ _ O
block _ _ O
tracking _ _ O
• _ _ O
bitmap _ _ O
• _ _ O
linked _ _ O
list _ _ O
of _ _ O
free _ _ O
blocks _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
3 _ _ O

Muddiest _ _ O
Points _ _ O
( _ _ O
1 _ _ O
/ _ _ O
3 _ _ O
) _ _ O
• _ _ O
Bitmapping _ _ O
for _ _ O
free _ _ O
blocks _ _ O
• _ _ O
It _ _ O
seems _ _ O
that _ _ O
directories _ _ O
have _ _ O
a _ _ O
limit _ _ O
to _ _ O
the _ _ O
number _ _ O
of _ _ O
files _ _ O
/ _ _ O
subdirectories _ _ O
they _ _ O
contain _ _ O
based _ _ O
on _ _ O
the _ _ O
size _ _ O
of _ _ O
a _ _ O
disk _ _ O
block _ _ O
. _ _ O
Is _ _ O
/ _ _ O
how _ _ O
is _ _ O
this _ _ O
limit _ _ O
overcome _ _ O
? _ _ O
• _ _ O
Everything _ _ O
• _ _ O
are _ _ O
the _ _ O
index _ _ O
nodes _ _ O
for _ _ O
the _ _ O
directories _ _ O
stored _ _ O
on _ _ O
the _ _ O
heap _ _ O
? _ _ O
is _ _ O
this _ _ O
different _ _ O
than _ _ O
the _ _ O
index _ _ O
nodes _ _ O
from _ _ O
the _ _ O
file _ _ O
allocation _ _ O
table _ _ O
? _ _ O
• _ _ O
Variable _ _ O
sized _ _ O
file _ _ O
name _ _ O
structures _ _ O
’ _ _ O
pros _ _ O
and _ _ O
cons _ _ O
• _ _ O
what _ _ O
exactly _ _ O
is _ _ O
an _ _ O
i-node _ _ O
and _ _ O
where _ _ O
is _ _ O
it _ _ O
stored _ _ O
? _ _ O
• _ _ O
Might _ _ O
need _ _ O
some _ _ O
recap _ _ O
on _ _ O
inode _ _ O
. _ _ O
So _ _ O
inode _ _ O
contains _ _ O
information _ _ O
for _ _ O
a _ _ O
specific _ _ O
file _ _ O
and _ _ O
block _ _ O
index _ _ O
is _ _ O
a _ _ O
block _ _ O
storing _ _ O
only _ _ O
the _ _ O
addresses _ _ O
of _ _ O
all _ _ O
the _ _ O
file _ _ O
block _ _ O
? _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
4 _ _ O

Muddiest _ _ O
Points _ _ O
( _ _ O
2 _ _ O
/ _ _ O
3 _ _ O
) _ _ O
• _ _ O
a _ _ O
little _ _ O
confused _ _ O
about _ _ O
Fast _ _ O
File _ _ O
System _ _ O
indexing _ _ O
• _ _ O
For _ _ O
FFS _ _ O
, _ _ O
all _ _ O
the _ _ O
files _ _ O
will _ _ O
be _ _ O
kept _ _ O
in _ _ O
one _ _ O
directoriy _ _ O
( _ _ O
or _ _ O
many _ _ O
directories _ _ O
? _ _ O
) _ _ O
and _ _ O
then _ _ O
we _ _ O
adopt _ _ O
the _ _ O
direct _ _ O
pointers _ _ O
or _ _ O
one-level _ _ O
or _ _ O
multi-level _ _ O
pointers _ _ O
to _ _ O
point _ _ O
to _ _ O
their _ _ O
data _ _ O
based _ _ O
on _ _ O
their _ _ O
size _ _ O
? _ _ O
• _ _ O
Typically _ _ O
one _ _ O
directory _ _ O
per _ _ O
index _ _ O
block _ _ O
? _ _ O
What _ _ O
about _ _ O
a _ _ O
subdirectory _ _ O
in _ _ O
a _ _ O
parent _ _ O
directory _ _ O
? _ _ O
Would _ _ O
there _ _ O
be _ _ O
another _ _ O
block _ _ O
index _ _ O
( _ _ O
for _ _ O
the _ _ O
subdirectory _ _ O
) _ _ O
stored _ _ O
in _ _ O
the _ _ O
parent _ _ O
directory _ _ O
? _ _ O
• _ _ O
Can _ _ O
you _ _ O
explain _ _ O
why _ _ O
smaller _ _ O
page _ _ O
size _ _ O
leads _ _ O
to _ _ O
more _ _ O
page _ _ O
fault _ _ O
? _ _ O
• _ _ O
Linked _ _ O
allocation _ _ O
versus _ _ O
contiguous _ _ O
and _ _ O
when _ _ O
is _ _ O
it _ _ O
optimal _ _ O
to _ _ O
use _ _ O
linked _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
5 _ _ O

Muddiest _ _ O
Points _ _ O
( _ _ O
3 _ _ O
/ _ _ O
3 _ _ O
) _ _ O
• _ _ O
how _ _ O
do _ _ O
we _ _ O
do _ _ O
midterm _ _ O
corrections _ _ O
• _ _ O
Top _ _ O
hat _ _ O
question _ _ O
about _ _ O
partition _ _ O
• _ _ O
Still _ _ O
a _ _ O
but _ _ O
confused _ _ O
on _ _ O
indexing _ _ O
for _ _ O
the _ _ O
Page _ _ O
Table _ _ O
Allocation _ _ O
• _ _ O
structure _ _ O
of _ _ O
a _ _ O
disk _ _ O
section _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
6 _ _ O

Problem _ _ O
of _ _ O
the _ _ O
Day _ _ O
– _ _ O
Part _ _ O
1 _ _ O
• _ _ O
How _ _ O
does _ _ O
a _ _ O
file _ _ O
system _ _ O
handle _ _ O
errors _ _ O
? _ _ O
• _ _ O
Answer _ _ O
: _ _ O
Defense _ _ O
in _ _ O
Depth _ _ O
• _ _ O
multiple _ _ O
layers _ _ O
of _ _ O
error _ _ O
detection _ _ O
/ _ _ O
correction _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
7 _ _ O

Software _ _ O
Stack _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
8 _ _ O

Device _ _ O
drivers _ _ O
• _ _ O
Device _ _ O
drivers _ _ O
go _ _ O
between _ _ O
device _ _ O
controllers _ _ O
and _ _ O
rest _ _ O
of _ _ O
OS _ _ O
User _ _ O
space _ _ O
• _ _ O
Drivers _ _ O
standardize _ _ O
interface _ _ O
to _ _ O
widely _ _ O
varied _ _ O
devices _ _ O
Kernel _ _ O
space _ _ O
• _ _ O
Device _ _ O
drivers _ _ O
communicate _ _ O
with _ _ O
controllers _ _ O
over _ _ O
bus _ _ O
• _ _ O
Controllers _ _ O
communicate _ _ O
with _ _ O
devices _ _ O
themselves _ _ O
User _ _ O
program _ _ O
Rest _ _ O
of _ _ O
the _ _ O
OS _ _ O
Keyboard _ _ O
driver _ _ O
Disk _ _ O
driver _ _ O
Keyboard _ _ O
controller _ _ O
Disk _ _ O
controller _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
9 _ _ O

Layers _ _ O
of _ _ O
I _ _ O
/ _ _ O
O _ _ O
software _ _ O
User-level _ _ O
I _ _ O
/ _ _ O
O _ _ O
software _ _ O
& _ _ O
libraries _ _ O
Device-independent _ _ O
OS _ _ O
software _ _ O
Device _ _ O
drivers _ _ O
Interrupt _ _ O
handlers _ _ O
User _ _ O
Operating _ _ O
system _ _ O
( _ _ O
kernel _ _ O
) _ _ O
Hardware _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
10 _ _ O

Anatomy _ _ O
of _ _ O
an _ _ O
I _ _ O
/ _ _ O
O _ _ O
request _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
11 _ _ O

Device _ _ O
Driver _ _ O
goals _ _ O
• _ _ O
Device _ _ O
independence _ _ O
• _ _ O
• _ _ O
Programs _ _ O
can _ _ O
access _ _ O
any _ _ O
I _ _ O
/ _ _ O
O _ _ O
device _ _ O
No _ _ O
need _ _ O
to _ _ O
specify _ _ O
device _ _ O
in _ _ O
advance _ _ O
• _ _ O
Uniform _ _ O
naming _ _ O
• _ _ O
• _ _ O
Name _ _ O
of _ _ O
a _ _ O
file _ _ O
or _ _ O
device _ _ O
is _ _ O
a _ _ O
string _ _ O
or _ _ O
an _ _ O
integer _ _ O
Does _ _ O
n’t _ _ O
depend _ _ O
on _ _ O
the _ _ O
machine _ _ O
( _ _ O
underlying _ _ O
hardware _ _ O
) _ _ O
• _ _ O
Error _ _ O
handling _ _ O
• _ _ O
• _ _ O
Done _ _ O
as _ _ O
close _ _ O
to _ _ O
the _ _ O
hardware _ _ O
as _ _ O
possible _ _ O
Isolate _ _ O
from _ _ O
higher-level _ _ O
software _ _ O
• _ _ O
Synchronous _ _ O
vs. _ _ O
asynchronous _ _ O
transfers _ _ O
• _ _ O
Blocked _ _ O
transfers _ _ O
vs. _ _ O
interrupt-driven _ _ O
• _ _ O
Buffering _ _ O
• _ _ O
Data _ _ O
coming _ _ O
off _ _ O
a _ _ O
device _ _ O
can _ _ O
not _ _ O
be _ _ O
stored _ _ O
in _ _ O
final _ _ O
destination _ _ O
• _ _ O
Sharable _ _ O
vs. _ _ O
dedicated _ _ O
devices _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
12 _ _ O

Disk _ _ O
drive _ _ O
structure _ _ O
• _ _ O
Data _ _ O
stored _ _ O
on _ _ O
surfaces _ _ O
• _ _ O
Up _ _ O
to _ _ O
two _ _ O
surfaces _ _ O
per _ _ O
platter _ _ O
• _ _ O
One _ _ O
or _ _ O
more _ _ O
platters _ _ O
per _ _ O
disk _ _ O
head _ _ O
sector _ _ O
• _ _ O
Data _ _ O
in _ _ O
concentric _ _ O
tracks _ _ O
• _ _ O
• _ _ O
Tracks _ _ O
broken _ _ O
into _ _ O
sectors _ _ O
platter _ _ O
• _ _ O
256B-1 _ _ O
KB _ _ O
per _ _ O
sector _ _ O
track _ _ O
Cylinder _ _ O
: _ _ O
corresponding _ _ O
tracks _ _ O
on _ _ O
all _ _ O
surfaces _ _ O
cylinder _ _ O
• _ _ O
Data _ _ O
read _ _ O
and _ _ O
written _ _ O
by _ _ O
heads _ _ O
• _ _ O
• _ _ O
Actuator _ _ O
moves _ _ O
heads _ _ O
surfaces _ _ O
spindle _ _ O
Heads _ _ O
move _ _ O
in _ _ O
unison _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
actuator _ _ O
13 _ _ O

Disks _ _ O
, _ _ O
cylinders _ _ O
, _ _ O
cylinder _ _ O
groups _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
14 _ _ O

Disk _ _ O
Sector _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
15 _ _ O

What _ _ O
’s _ _ O
in _ _ O
a _ _ O
disk _ _ O
request _ _ O
? _ _ O
• _ _ O
Time _ _ O
required _ _ O
to _ _ O
read _ _ O
or _ _ O
write _ _ O
a _ _ O
disk _ _ O
block _ _ O
determined _ _ O
by _ _ O
3 _ _ O
factors _ _ O
• _ _ O
Seek _ _ O
time _ _ O
• _ _ O
Rotational _ _ O
delay _ _ O
• _ _ O
Average _ _ O
delay _ _ O
= _ _ O
1 _ _ O
/ _ _ O
2 _ _ O
rotation _ _ O
time _ _ O
• _ _ O
Example _ _ O
: _ _ O
rotate _ _ O
in _ _ O
10ms _ _ O
, _ _ O
average _ _ O
rotation _ _ O
delay _ _ O
= _ _ O
5ms _ _ O
• _ _ O
Actual _ _ O
transfer _ _ O
time _ _ O
• _ _ O
Transfer _ _ O
time _ _ O
= _ _ O
time _ _ O
to _ _ O
rotate _ _ O
over _ _ O
sector _ _ O
• _ _ O
Example _ _ O
: _ _ O
rotate _ _ O
in _ _ O
10ms _ _ O
, _ _ O
200 _ _ O
sectors _ _ O
/ _ _ O
track _ _ O
= _ _ O
> _ _ O
10 _ _ O
/ _ _ O
200 _ _ O
ms _ _ O
= _ _ O
0.05ms _ _ O
transfer _ _ O
time _ _ O
per _ _ O
sector _ _ O
• _ _ O
Seek _ _ O
time _ _ O
dominates _ _ O
, _ _ O
with _ _ O
rotation _ _ O
time _ _ O
close _ _ O
• _ _ O
Error _ _ O
checking _ _ O
is _ _ O
done _ _ O
by _ _ O
controllers _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
16 _ _ O

Disk _ _ O
drive _ _ O
specifics _ _ O
IBM _ _ O
360 _ _ O
KB _ _ O
floppy _ _ O
WD _ _ O
18 _ _ O
GB _ _ O
HD _ _ O
Cylinders _ _ O
40 _ _ O
10601 _ _ O
Tracks _ _ O
per _ _ O
cylinder _ _ O
2 _ _ O
12 _ _ O
Sectors _ _ O
per _ _ O
track _ _ O
9 _ _ O
281 _ _ O
( _ _ O
average _ _ O
) _ _ O
Sectors _ _ O
per _ _ O
disk _ _ O
720 _ _ O
35742000 _ _ O
Bytes _ _ O
per _ _ O
sector _ _ O
512 _ _ O
512 _ _ O
Capacity _ _ O
360 _ _ O
KB _ _ O
18.3 _ _ O
GB _ _ O
Seek _ _ O
time _ _ O
( _ _ O
minimum _ _ O
) _ _ O
6 _ _ O
ms _ _ O
0.8 _ _ O
ms _ _ O
Seek _ _ O
time _ _ O
( _ _ O
average _ _ O
) _ _ O
77 _ _ O
ms _ _ O
6.9 _ _ O
ms _ _ O
Rotation _ _ O
time _ _ O
200 _ _ O
ms _ _ O
8.33 _ _ O
ms _ _ O
Spinup _ _ O
time _ _ O
250 _ _ O
ms _ _ O
20 _ _ O
sec _ _ O
Sector _ _ O
transfer _ _ O
time _ _ O
22 _ _ O
ms _ _ O
17 _ _ O
msec _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
17 _ _ O

Structure _ _ O
of _ _ O
a _ _ O
disk _ _ O
sector _ _ O
• _ _ O
Preamble _ _ O
contains _ _ O
information _ _ O
about _ _ O
the _ _ O
sector _ _ O
• _ _ O
Sector _ _ O
number _ _ O
& _ _ O
location _ _ O
information _ _ O
• _ _ O
Data _ _ O
is _ _ O
usually _ _ O
256 _ _ O
, _ _ O
512 _ _ O
, _ _ O
or _ _ O
1024 _ _ O
bytes _ _ O
• _ _ O
ECC _ _ O
( _ _ O
Error _ _ O
Correcting _ _ O
Code _ _ O
) _ _ O
is _ _ O
used _ _ O
to _ _ O
detect _ _ O
& _ _ O
correct _ _ O
minor _ _ O
errors _ _ O
in _ _ O
the _ _ O
data _ _ O
Preamble _ _ O
Data _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
ECC _ _ O
18 _ _ O

Parity _ _ O
Examples _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
19 _ _ O

1-d _ _ O
parity _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
20 _ _ O

2-d _ _ O
parity _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
21 _ _ O

When _ _ O
good _ _ O
disks _ _ O
go _ _ O
bad _ _ O
… _ _ O
Disks _ _ O
have _ _ O
defects _ _ O
In _ _ O
3M+ _ _ O
sectors _ _ O
, _ _ O
this _ _ O
is _ _ O
n’t _ _ O
surprising _ _ O
! _ _ O
ECC _ _ O
helps _ _ O
with _ _ O
errors _ _ O
, _ _ O
but _ _ O
sometimes _ _ O
this _ _ O
is _ _ O
n’t _ _ O
enough _ _ O
Disks _ _ O
keep _ _ O
spare _ _ O
sectors _ _ O
( _ _ O
normally _ _ O
unused _ _ O
) _ _ O
and _ _ O
remap _ _ O
bad _ _ O
sectors _ _ O
into _ _ O
these _ _ O
spares _ _ O
If _ _ O
there _ _ O
’s _ _ O
time _ _ O
, _ _ O
the _ _ O
whole _ _ O
track _ _ O
could _ _ O
be _ _ O
reordered _ _ O
… _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
22 _ _ O

RAIDs _ _ O
, _ _ O
RAIDs _ _ O
, _ _ O
and _ _ O
more _ _ O
RAIDs _ _ O
strip _ _ O
strip _ _ O
Stripe _ _ O
RAID _ _ O
0 _ _ O
( _ _ O
Redundant _ _ O
Array _ _ O
of _ _ O
Inexpensive _ _ O
Disks _ _ O
RAID _ _ O
1 _ _ O
( _ _ O
Mirrored _ _ O
copies _ _ O
) _ _ O
RAID _ _ O
4 _ _ O
( _ _ O
Striped _ _ O
with _ _ O
parity _ _ O
) _ _ O
RAID _ _ O
5 _ _ O
( _ _ O
Parity _ _ O
rotates _ _ O
through _ _ O
disks _ _ O
) _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O
23 _ _ O



