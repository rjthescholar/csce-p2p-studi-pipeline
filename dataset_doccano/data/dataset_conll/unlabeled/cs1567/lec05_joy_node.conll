unlabeled|cs1567|lec05_joy_node
-DOCSTART- -X- -X- O

Joy _ _ O
Node _ _ O
Thumrongsak _ _ O
Kosiyatrakul _ _ O
Thumrongsak _ _ O
Kosiyatrakul _ _ O
Joy _ _ O
Node _ _ O

Joy _ _ O
Node _ _ O
joy_node _ _ O
node _ _ O
communicates _ _ O
with _ _ O
a _ _ O
joystick _ _ O
connected _ _ O
via _ _ O
a _ _ O
USB _ _ O
port _ _ O
Provide _ _ O
hardware _ _ O
abstractions _ _ O
To _ _ O
receive _ _ O
data _ _ O
from _ _ O
a _ _ O
joystick _ _ O
, _ _ O
simply _ _ O
subscribe _ _ O
for _ _ O
messages _ _ O
from _ _ O
the _ _ O
topic _ _ O
named _ _ O
joy _ _ O
To _ _ O
start _ _ O
a _ _ O
joy _ _ O
node _ _ O
, _ _ O
use _ _ O
the _ _ O
following _ _ O
series _ _ O
of _ _ O
commands _ _ O
on _ _ O
a _ _ O
console _ _ O
screen _ _ O
: _ _ O
rosparam _ _ O
set _ _ O
joy_node _ _ O
/ _ _ O
dev _ _ O
" _ _ O
/dev _ _ O
/ _ _ O
input _ _ O
/ _ _ O
js1 _ _ O
" _ _ O
rosrun _ _ O
joy _ _ O
joy_node _ _ O
Make _ _ O
sure _ _ O
roscore _ _ O
has _ _ O
been _ _ O
executed _ _ O
in _ _ O
another _ _ O
console _ _ O
screen _ _ O
The _ _ O
command _ _ O
rostopic _ _ O
list _ _ O
should _ _ O
show _ _ O
the _ _ O
following _ _ O
: _ _ O
/diagnostics _ _ O
/joy _ _ O
/rosout _ _ O
/rosout_agg _ _ O
Thumrongsak _ _ O
Kosiyatrakul _ _ O
Joy _ _ O
Node _ _ O

Xbox _ _ O
360 _ _ O
Controller _ _ O
Thumrongsak _ _ O
Kosiyatrakul _ _ O
Joy _ _ O
Node _ _ O

Topic _ _ O
joy _ _ O
The _ _ O
joy _ _ O
node _ _ O
publishes _ _ O
joystick _ _ O
data _ _ O
to _ _ O
a _ _ O
topic _ _ O
named _ _ O
joy _ _ O
The _ _ O
type _ _ O
of _ _ O
message _ _ O
is _ _ O
Joy _ _ O
The _ _ O
message _ _ O
of _ _ O
type _ _ O
Joy _ _ O
is _ _ O
a _ _ O
data _ _ O
structure _ _ O
consisting _ _ O
of _ _ O
the _ _ O
following _ _ O
components _ _ O
: _ _ O
1 _ _ O
2 _ _ O
3 _ _ O
Data _ _ O
structure _ _ O
named _ _ O
header _ _ O
, _ _ O
Array _ _ O
of _ _ O
floating-point _ _ O
numbers _ _ O
named _ _ O
axes _ _ O
, _ _ O
and _ _ O
Array _ _ O
of _ _ O
integers _ _ O
named _ _ O
buttons _ _ O
Thumrongsak _ _ O
Kosiyatrakul _ _ O
Joy _ _ O
Node _ _ O

buttons _ _ O
Array _ _ O
of _ _ O
integers _ _ O
named _ _ O
buttons _ _ O
are _ _ O
organized _ _ O
as _ _ O
follows _ _ O
: _ _ O
Index _ _ O
Button _ _ O
name _ _ O
on _ _ O
the _ _ O
controller _ _ O
0 _ _ O
A _ _ O
1 _ _ O
B _ _ O
2 _ _ O
X _ _ O
3 _ _ O
Y _ _ O
4 _ _ O
LB _ _ O
5 _ _ O
RB _ _ O
6 _ _ O
back _ _ O
7 _ _ O
start _ _ O
8 _ _ O
power _ _ O
9 _ _ O
Button _ _ O
stick _ _ O
left _ _ O
10 _ _ O
Button _ _ O
stick _ _ O
right _ _ O
Thumrongsak _ _ O
Kosiyatrakul _ _ O
Joy _ _ O
Node _ _ O

axes _ _ O
Array _ _ O
of _ _ O
floating-point _ _ O
numbers _ _ O
named _ _ O
axes _ _ O
are _ _ O
organized _ _ O
as _ _ O
follows _ _ O
: _ _ O
Index _ _ O
Button _ _ O
name _ _ O
on _ _ O
the _ _ O
controller _ _ O
0 _ _ O
Left _ _ O
/ _ _ O
Right _ _ O
Axis _ _ O
stick _ _ O
left _ _ O
1 _ _ O
Up _ _ O
/ _ _ O
Down _ _ O
Axis _ _ O
stick _ _ O
left _ _ O
2 _ _ O
LT _ _ O
3 _ _ O
Left _ _ O
/ _ _ O
Right _ _ O
Axis _ _ O
stick _ _ O
right _ _ O
4 _ _ O
Up _ _ O
/ _ _ O
Down _ _ O
Axis _ _ O
stick _ _ O
right _ _ O
5 _ _ O
RT _ _ O
6 _ _ O
cross _ _ O
key _ _ O
left _ _ O
/ _ _ O
right _ _ O
7 _ _ O
cross _ _ O
key _ _ O
up _ _ O
/ _ _ O
down _ _ O
Thumrongsak _ _ O
Kosiyatrakul _ _ O
Joy _ _ O
Node _ _ O

Topic _ _ O
joy _ _ O
Note _ _ O
that _ _ O
if _ _ O
the _ _ O
state _ _ O
of _ _ O
joystick _ _ O
does _ _ O
not _ _ O
change _ _ O
, _ _ O
no _ _ O
messages _ _ O
will _ _ O
be _ _ O
published _ _ O
to _ _ O
the _ _ O
topic _ _ O
joy _ _ O
If _ _ O
you _ _ O
run _ _ O
the _ _ O
command _ _ O
rostopic _ _ O
echo _ _ O
-c _ _ O
joy _ _ O
you _ _ O
may _ _ O
not _ _ O
see _ _ O
anything _ _ O
If _ _ O
you _ _ O
press _ _ O
the _ _ O
button _ _ O
A _ _ O
, _ _ O
you _ _ O
may _ _ O
see _ _ O
something _ _ O
as _ _ O
shown _ _ O
below _ _ O
: _ _ O
header _ _ O
: _ _ O
seq _ _ O
: _ _ O
265 _ _ O
stamp _ _ O
: _ _ O
secs _ _ O
: _ _ O
1464206519 _ _ O
nsecs _ _ O
: _ _ O
129026422 _ _ O
frame_id _ _ O
: _ _ O
` _ _ O
' _ _ O
axes _ _ O
: _ _ O
[ _ _ O
-0.0 _ _ O
, _ _ O
-0.0 _ _ O
, _ _ O
1.0 _ _ O
, _ _ O
-0.0 _ _ O
, _ _ O
-0.0 _ _ O
, _ _ O
1.0 _ _ O
, _ _ O
0.0 _ _ O
, _ _ O
0.0 _ _ O
] _ _ O
buttons _ _ O
: _ _ O
[ _ _ O
1 _ _ O
, _ _ O
0 _ _ O
, _ _ O
0 _ _ O
, _ _ O
0 _ _ O
, _ _ O
0 _ _ O
, _ _ O
0 _ _ O
, _ _ O
0 _ _ O
, _ _ O
0 _ _ O
, _ _ O
0 _ _ O
, _ _ O
0 _ _ O
, _ _ O
0 _ _ O
] _ _ O
Thumrongsak _ _ O
Kosiyatrakul _ _ O
Joy _ _ O
Node _ _ O

Topic _ _ O
joy _ _ O
To _ _ O
import _ _ O
the _ _ O
data _ _ O
structure _ _ O
joy _ _ O
to _ _ O
your _ _ O
Python _ _ O
script _ _ O
, _ _ O
you _ _ O
need _ _ O
to _ _ O
insert _ _ O
the _ _ O
following _ _ O
statement _ _ O
in _ _ O
the _ _ O
beginning _ _ O
: _ _ O
# _ _ O
! _ _ O
/usr _ _ O
/ _ _ O
bin _ _ O
/ _ _ O
env _ _ O
python _ _ O
import _ _ O
rospy _ _ O
from _ _ O
sensor_msgs.msg _ _ O
import _ _ O
Joy _ _ O
To _ _ O
subscribe _ _ O
to _ _ O
the _ _ O
topic _ _ O
joy _ _ O
of _ _ O
type _ _ O
Joy _ _ O
, _ _ O
use _ _ O
the _ _ O
following _ _ O
statement _ _ O
in _ _ O
your _ _ O
Python _ _ O
script _ _ O
: _ _ O
rospy.Subscriber _ _ O
( _ _ O
"joy _ _ O
" _ _ O
, _ _ O
Joy _ _ O
, _ _ O
callback _ _ O
) _ _ O
Thumrongsak _ _ O
Kosiyatrakul _ _ O
Joy _ _ O
Node _ _ O

Example _ _ O
# _ _ O
! _ _ O
/usr _ _ O
/ _ _ O
bin _ _ O
/ _ _ O
env _ _ O
python _ _ O
import _ _ O
rospy _ _ O
from _ _ O
sensor_msgs.msg _ _ O
import _ _ O
Joy _ _ O
def _ _ O
callback _ _ O
( _ _ O
data _ _ O
) _ _ O
: _ _ O
print _ _ O
data.buttons _ _ O
[ _ _ O
0 _ _ O
] _ _ O
print _ _ O
data.axes _ _ O
[ _ _ O
0 _ _ O
] _ _ O
def _ _ O
testJoy _ _ O
( _ _ O
) _ _ O
: _ _ O
rospy.init_node _ _ O
( _ _ O
"joystick _ _ O
" _ _ O
, _ _ O
anonymous=True _ _ O
) _ _ O
rospy.Subscriber _ _ O
( _ _ O
"joy _ _ O
" _ _ O
, _ _ O
Joy _ _ O
, _ _ O
callback _ _ O
) _ _ O
rospy.spin _ _ O
( _ _ O
) _ _ O
if _ _ O
_ _ _ O
_ _ _ O
name _ _ O
_ _ _ O
_ _ _ O
= _ _ O
= _ _ O
' _ _ O
_ _ _ O
_ _ _ O
main _ _ O
_ _ _ O
_ _ _ O
' _ _ O
: _ _ O
testJoy _ _ O
( _ _ O
) _ _ O
Thumrongsak _ _ O
Kosiyatrakul _ _ O
Joy _ _ O
Node _ _ O

Controlling _ _ O
a _ _ O
Kobuki _ _ O
A _ _ O
robot _ _ O
can _ _ O
be _ _ O
controlled _ _ O
by _ _ O
sending _ _ O
a _ _ O
message _ _ O
of _ _ O
type _ _ O
Twist _ _ O
To _ _ O
import _ _ O
the _ _ O
data _ _ O
structure _ _ O
Twist _ _ O
, _ _ O
use _ _ O
the _ _ O
following _ _ O
command _ _ O
: _ _ O
from _ _ O
geometry_msgs.msg _ _ O
import _ _ O
Twist _ _ O
To _ _ O
create _ _ O
a _ _ O
variable _ _ O
named _ _ O
command _ _ O
of _ _ O
type _ _ O
Twist _ _ O
, _ _ O
use _ _ O
the _ _ O
following _ _ O
command _ _ O
: _ _ O
command _ _ O
= _ _ O
Twist _ _ O
( _ _ O
) _ _ O
We _ _ O
will _ _ O
only _ _ O
use _ _ O
two _ _ O
components _ _ O
: _ _ O
command.linear.x _ _ O
Value _ _ O
can _ _ O
be _ _ O
between _ _ O
-1.0 _ _ O
to _ _ O
1.0 _ _ O
Positive _ _ O
value _ _ O
makes _ _ O
the _ _ O
robot _ _ O
moves _ _ O
forward _ _ O
Negative _ _ O
value _ _ O
makes _ _ O
the _ _ O
robot _ _ O
moves _ _ O
backward _ _ O
command.angular.z _ _ O
Value _ _ O
can _ _ O
be _ _ O
between _ _ O
-1.0 _ _ O
to _ _ O
1.0 _ _ O
Positive _ _ O
value _ _ O
makes _ _ O
the _ _ O
robot _ _ O
turns _ _ O
to _ _ O
its _ _ O
left _ _ O
Negative _ _ O
value _ _ O
makes _ _ O
the _ _ O
robot _ _ O
turns _ _ O
to _ _ O
its _ _ O
right _ _ O
Thumrongsak _ _ O
Kosiyatrakul _ _ O
Joy _ _ O
Node _ _ O

Controlling _ _ O
a _ _ O
Kobuki _ _ O
To _ _ O
control _ _ O
the _ _ O
robot _ _ O
, _ _ O
the _ _ O
message _ _ O
of _ _ O
type _ _ O
Twist _ _ O
must _ _ O
be _ _ O
publish _ _ O
to _ _ O
the _ _ O
following _ _ O
topic _ _ O
: _ _ O
/mobile_base _ _ O
/ _ _ O
commands _ _ O
/ _ _ O
velocity _ _ O
Examples _ _ O
: _ _ O
If _ _ O
you _ _ O
want _ _ O
to _ _ O
make _ _ O
the _ _ O
robot _ _ O
moves _ _ O
forward _ _ O
in _ _ O
a _ _ O
straight _ _ O
line _ _ O
at _ _ O
half _ _ O
speed _ _ O
: _ _ O
command.linear.x _ _ O
= _ _ O
0.5 _ _ O
command.angular.z _ _ O
= _ _ O
0.0 _ _ O
For _ _ O
example _ _ O
, _ _ O
if _ _ O
you _ _ O
want _ _ O
to _ _ O
make _ _ O
the _ _ O
robot _ _ O
makes _ _ O
a _ _ O
stationary _ _ O
turn _ _ O
to _ _ O
its _ _ O
left _ _ O
at _ _ O
half _ _ O
speed _ _ O
: _ _ O
command.linear.x _ _ O
= _ _ O
0.0 _ _ O
command.angular.z _ _ O
= _ _ O
0.5 _ _ O
For _ _ O
example _ _ O
, _ _ O
if _ _ O
you _ _ O
want _ _ O
to _ _ O
make _ _ O
the _ _ O
robot _ _ O
moves _ _ O
forward _ _ O
and _ _ O
turn _ _ O
at _ _ O
the _ _ O
same _ _ O
time _ _ O
: _ _ O
command.linear.x _ _ O
= _ _ O
0.5 _ _ O
command.angular.z _ _ O
= _ _ O
0.5 _ _ O
Thumrongsak _ _ O
Kosiyatrakul _ _ O
Joy _ _ O
Node _ _ O

Use _ _ O
Simulator _ _ O
( _ _ O
for _ _ O
now _ _ O
) _ _ O
ROS _ _ O
allows _ _ O
you _ _ O
to _ _ O
see _ _ O
how _ _ O
robot _ _ O
moves _ _ O
in _ _ O
a _ _ O
virtual _ _ O
world _ _ O
First _ _ O
, _ _ O
run _ _ O
the _ _ O
following _ _ O
command _ _ O
in _ _ O
a _ _ O
console _ _ O
screen _ _ O
: _ _ O
roslaunch _ _ O
kobuki_softnode _ _ O
full.launch _ _ O
Open _ _ O
a _ _ O
new _ _ O
console _ _ O
screen _ _ O
and _ _ O
run _ _ O
the _ _ O
following _ _ O
command _ _ O
: _ _ O
rosrun _ _ O
rviz _ _ O
rviz _ _ O
In _ _ O
rviz _ _ O
1 _ _ O
2 _ _ O
On _ _ O
the _ _ O
left _ _ O
pane _ _ O
, _ _ O
set _ _ O
Fixed _ _ O
Frame _ _ O
to _ _ O
/odom _ _ O
At _ _ O
the _ _ O
bottom _ _ O
left _ _ O
corner _ _ O
, _ _ O
click _ _ O
Add _ _ O
and _ _ O
choose _ _ O
RobotModel _ _ O
You _ _ O
should _ _ O
see _ _ O
an _ _ O
image _ _ O
of _ _ O
a _ _ O
Kobuki _ _ O
robot _ _ O
on _ _ O
your _ _ O
screen _ _ O
At _ _ O
this _ _ O
point _ _ O
, _ _ O
if _ _ O
you _ _ O
publish _ _ O
a _ _ O
command _ _ O
of _ _ O
type _ _ O
Twist _ _ O
, _ _ O
robot _ _ O
will _ _ O
move _ _ O
according _ _ O
to _ _ O
the _ _ O
command _ _ O
Thumrongsak _ _ O
Kosiyatrakul _ _ O
Joy _ _ O
Node _ _ O



