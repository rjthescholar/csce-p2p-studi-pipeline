{"id": 12, "segment": ["train_set", "labeled"], "course": "cs1550", "lec": "lec01", "text": "Introduction to Operating Systems\nCS/COE 1550\nSpring 2022\n\nSherif Khattab\nksm73@pitt.edu\n(Some slides are from Silberschatz, Galvin and Gagne \u00a92013)\n\nAnnouncements\n\u2022 Lab 0 due this Friday (soft deadline; not graded)\n\n\u2022 Homework 1 will be posted this Friday\n\u2022 Recitations start this week\n\u2022 VS Code setup tutorial on Piazza (also linked from\nCanvas)\n\n\u2022 Draft Slides linked from Canvas\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nAgenda\n\u2022 Main tasks of an operating system\n\n\u2022 System Calls\n\u2022 What an interrupt is\n\u2022 What happens when an interrupt occurs\n\u2022 What a system call is\n\n\u2022 How system calls implemented\n\u2022 Effect of OS structure on system calls\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nWhat is an Operating System?\nA program that acts as an intermediary between a user\nof a computer and the computer hardware\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nWhat does an OS do?\n\u2022 Manages (controls and arbitrates) resources\n\u2022 Processors, Memory, Input/output devices,\nCommunication devices, Storage, Software applications\n\u2022 Conflicting goals:\n\u2022\n\ne.g., performance vs. utilization\n\n\u2022\n\nSeparation of policy and mechansim\n\n\u2022 Provides abstractions to application programs\n\u2022 Ease of use\n\u2022 Virtualization\n\n\u2022 Protects resources\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nInterrupts\nHardware or software:\n\u2022 Hardware interrupt by one of the devices\n\u2022 Software interrupt (exception or trap):\n\u2022 Software error (e.g., division by zero)\n\u2022 Other process problems include processes trying to modify each\nother's or the operating system's memory (e.g., segmentation\nfault)\n\u2022 Request for operating system service (i.e., system call)\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nInterrupt Descriptor Table\n\u2022 Interrupt transfers control to the interrupt service\nroutine (ISR)\n\u2022 ISRs are segments of code that determine what\naction should be taken for each type of interrupt\n\u2022 part of the OS kernel\n\n\u2022 An interrupt vector contains the address of the ISR\nfor one interrupt\n\u2022 An interrupt vector table is an array of interrupt\nvectors\n\u2022 also known as interrupt descriptor table (IDT)\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nDual-mode Operation\n\u2022 Dual-mode operation allows OS to protect itself and\nother system components\n\u2022 At least two modes: user mode and kernel mode\n\u2022 Mode bit(s) provided by hardware (inside CPU registers)\n\u2022 Provides ability to distinguish when system is running user code\nor kernel code\n\u2022 Some instructions designated as privileged, only executable in\nkernel mode\n\u2022 Some memory addresses designated as privileged, only\naccessible in kernel mode\n\u2022\n\nTherefore, we get segmentation fault on null (i.e., 0) pointer dereference\n\n\u2022 Interrupts change mode to kernel\n\u2022\n\nreturn from interrupt resets mode back to user\n\n\u2022 Increasingly CPUs support multi-mode operations\n\u2022 virtual machine manager (VMM) mode for guest VMs\nCS 1550 - Operating Systems - Sherif Khattab\n\nWhat happens when an interrupt occurs?\nThe CPU transitions from User Mode to Kernel Mode\n\nan interrupt\noccurs\n\nreturn from ISR\n\nexecute ISR\n\nTime\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nHow does an OS (roughly) work?\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nWhat happens on a hardware interrupt?\n6\n\n1\n\n4\n\n5\n\n9\n\n3\n\n8\n\n2\n\nCS 1550 - Operating Systems - Sherif Khattab\n\n7\n\nSystem Calls\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nSystem Calls\n\u2022 Programming interface to OS services\n\u2022 Typically written in a high-level language (C or C++)\n\u2022 Mostly accessed by programs via a high-level\nApplication Programming Interface (API) rather\nthan direct system call use\n\u2022 Win32 API for Windows\n\u2022 POSIX API for POSIX-based systems (including virtually\nall versions of UNIX, Linux, and Mac OS X), and\n\u2022 Java API for the Java virtual machine (JVM)\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nSystem Call Implementation\n\u2022 Typically, there is a number associated with each system\ncall\n\u2022 Each system call has a corresponding system call\nimplementation function (part of the OS kernel)\n\u2022 System-call table indexed according to these numbers\n\u2022\n\nEach entry in the table contains the address of the\ncorresponding system call implementation function\n\n\u2022 The system call interface is the ISR corresponding to the\nsyscall software interrupt\n\u2022\n\u2022\n\u2022\n\ninvokes the intended system call in OS kernel,\npasses arguments if needed, and\nreturns status of the system call and any return values\n\n\u2022 The caller need know nothing about how the system call\nis implemented\nCS 1550 - Operating Systems - Sherif Khattab\n\nAPI - System Call - OS Relationship\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nStandard C Library Example\n\u2022 C program invoking printf() library call, which calls\nwrite() system call\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nWhat happens on a syscall?\n2\n\n1\n6\n\n7\n12\n\n1 eax <-- 1\nint 64\n\n10\n\n3\n\n4\n\n11\n\n5\n\n8\n\n9\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nSystem Call Parameter Passing\n\u2022 Three general methods used to pass parameters to\nthe OS\n\u2022 Simplest: pass the parameters in registers\n\u2022\n\nIn some cases, may be more parameters than registers\n\n\u2022 Parameters stored in a block, or table, in memory, and\naddress of block passed as a parameter in a register\n\u2022 This approach taken by Linux and Solaris\n\n\u2022 Parameters placed, or pushed, onto the stack by the\nprogram and popped off the stack by the operating\nsystem\n\u2022\n\nXV6\n\n\u2022 Block and stack methods do not limit the number or\nlength of parameters being passed\nCS 1550 - Operating Systems - Sherif Khattab\n\nHow to add a system call to an OS?\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nXv6 Code Walkthrough\n\u2022 IDT table initialization\n\n\u2022 Syscall table\n\u2022 How a syscall is invoked\n\u2022 Syscall implementation\n\u2022 Parameter passing into a syscall\n\u2022 In Lab 1 you will add a system call to Xv6\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nTraditional UNIX System Structure\nBeyond simple but not fully layered\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nMicrokernel System Structure\nApplication\nProgram\n\nFile\nSystem\n\nmessages\n\nInterprocess\nCommunication\n\nDevice\nDriver\n\nuser\nmode\n\nCPU\nscheduling\n\nkernel\nmode\n\nmessages\n\nmemory\nmanagment\n\nmicrokernel\n\nhardware\n\nCS 1550 - Operating Systems - Sherif Khattab\n\n", "label": [[456, 472, "Concept"], [707, 723, "Concept"], [1516, 1532, "Concept"], [1583, 1599, "Concept"], [620, 622, "Concept"], [879, 881, "Concept"], [1883, 1885, "Concept"], [2172, 2174, "Concept"], [3084, 3086, "Concept"], [3361, 3363, "Concept"], [3669, 3671, "Concept"], [3952, 3954, "Concept"], [4254, 4256, "Concept"], [4492, 4494, "Concept"], [4920, 4922, "Concept"], [5462, 5464, "Concept"], [1192, 1206, "Concept"], [499, 508, "Concept"], [535, 544, "Concept"], [1320, 1329, "Concept"], [1363, 1372, "Concept"], [1675, 1684, "Concept"], [1704, 1713, "Concept"], [1739, 1748, "Concept"], [1859, 1868, "Concept"], [1899, 1908, "Concept"], [1956, 1965, "Concept"], [1971, 1980, "Concept"], [2009, 2018, "Concept"], [2043, 2052, "Concept"], [2696, 2705, "Concept"], [2900, 2909, "Concept"], [2972, 2981, "Concept"], [3177, 3186, "Concept"], [4201, 4210, "Concept"], [1311, 1329, "Concept"], [3168, 3186, "Concept"], [1354, 1372, "Concept"], [4192, 4210, "Concept"], [1374, 1383, "Concept"], [1387, 1391, "Concept"], [2588, 2606, "Concept"], [561, 572, "Concept"], [1615, 1626, "Concept"], [3535, 3546, "Concept"], [3773, 3784, "Concept"], [3871, 3882, "Concept"], [3903, 3914, "Concept"], [4087, 4098, "Concept"], [4130, 4141, "Concept"], [4239, 4250, "Concept"], [4319, 4330, "Concept"], [4399, 4410, "Concept"], [4478, 4489, "Concept"], [4646, 4657, "Concept"], [4835, 4846, "Concept"], [5444, 5455, "Concept"], [5691, 5702, "Concept"], [4184, 4191, "Concept"], [4723, 4730, "Concept"], [5564, 5571, "Concept"], [5586, 5593, "Concept"], [5607, 5614, "Concept"], [5657, 5664, "Concept"], [1766, 1769, "Concept"], [1944, 1947, "Concept"], [3002, 3005, "Concept"], [3015, 3018, "Concept"], [4159, 4162, "Concept"], [1899, 1915, "Concept"], [1971, 1987, "Concept"], [1971, 1993, "Concept"], [1675, 1701, "Concept"], [2043, 2069, "Concept"], [2071, 2074, "Concept"], [5536, 5539, "Concept"], [2123, 2142, "Concept"], [2145, 2164, "Concept"], [2243, 2252, "Concept"], [2943, 2952, "Concept"], [2257, 2268, "Concept"], [2474, 2485, "Concept"], [2555, 2566, "Concept"], [2956, 2967, "Concept"], [2271, 2279, "Concept"], [2784, 2807, "Concept"], [2809, 2812, "Concept"], [2784, 2799, "Concept"], [3704, 3719, "Concept"], [3476, 3509, "Concept"], [3511, 3514, "Concept"], [3559, 3562, "Concept"], [3583, 3586, "Concept"], [3687, 3690, "Concept"], [4472, 4475, "Concept"], [3553, 3562, "Concept"], [3577, 3582, "Concept"], [3591, 3596, "Concept"], [3577, 3586, "Concept"], [3682, 3690, "Concept"], [3699, 3719, "Concept"], [3721, 3724, "Concept"], [4130, 4151, "Concept"], [4087, 4122, "Concept"], [3965, 3982, "Concept"], [5564, 5577, "Concept"], [4835, 4864, "Concept"], [4944, 4967, "Concept"], [4555, 4573, "Concept"], [4612, 4624, "Concept"], [5293, 5296, "Concept"], [5513, 5516, "Concept"], [5706, 5709, "Concept"], [5536, 5560, "Concept"], [5607, 5629, "Concept"], [5874, 5885, "Concept"], [6058, 6069, "Concept"], [5874, 5902, "Concept"], [5757, 5790, "Concept"]]}