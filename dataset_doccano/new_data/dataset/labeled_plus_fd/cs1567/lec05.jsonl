{"id": 278, "segment": ["train_set", "labeled_plus_fd"], "course": "cs1567", "lec": "lec05", "text": "Joy Node\nThumrongsak Kosiyatrakul\n\nThumrongsak Kosiyatrakul\n\nJoy Node\n\n\fJoy Node\njoy_node node communicates with a joystick connected via a\nUSB port\nProvide hardware abstractions\nTo receive data from a joystick, simply subscribe for messages\nfrom the topic named joy\nTo start a joy node, use the following series of commands on a\nconsole screen:\nrosparam set joy_node/dev \"/dev/input/js1\"\nrosrun joy joy_node\n\nMake sure roscore has been executed in another console\nscreen\nThe command rostopic list should show the following:\n/diagnostics\n/joy\n/rosout\n/rosout_agg\nThumrongsak Kosiyatrakul\n\nJoy Node\n\n\fXbox 360 Controller\n\nThumrongsak Kosiyatrakul\n\nJoy Node\n\n\fTopic joy\n\nThe joy node publishes joystick data to a topic named joy\nThe type of message is Joy\nThe message of type Joy is a data structure consisting of the\nfollowing components:\n1\n2\n3\n\nData structure named header,\nArray of floating-point numbers named axes, and\nArray of integers named buttons\n\nThumrongsak Kosiyatrakul\n\nJoy Node\n\n\fbuttons\nArray of integers named buttons are organized as follows:\nIndex Button name on the controller\n0\nA\n1\nB\n2\nX\n3\nY\n4\nLB\n5\nRB\n6\nback\n7\nstart\n8\npower\n9\nButton stick left\n10\nButton stick right\n\nThumrongsak Kosiyatrakul\n\nJoy Node\n\n\faxes\n\nArray of floating-point numbers named axes are organized as\nfollows:\nIndex Button name on the controller\n0\nLeft/Right Axis stick left\n1\nUp/Down Axis stick left\n2\nLT\n3\nLeft/Right Axis stick right\n4\nUp/Down Axis stick right\n5\nRT\n6\ncross key left/right\n7\ncross key up/down\n\nThumrongsak Kosiyatrakul\n\nJoy Node\n\n\fTopic joy\n\nNote that if the state of joystick does not change, no messages\nwill be published to the topic joy\nIf you run the command\nrostopic echo -c joy\n\nyou may not see anything\nIf you press the button A, you may see something as shown below:\nheader:\nseq: 265\nstamp:\nsecs: 1464206519\nnsecs: 129026422\nframe_id: `'\naxes: [-0.0, -0.0, 1.0, -0.0, -0.0, 1.0, 0.0, 0.0]\nbuttons: [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n\nThumrongsak Kosiyatrakul\n\nJoy Node\n\n\fTopic joy\n\nTo import the data structure joy to your Python script, you need\nto insert the following statement in the beginning:\n#!/usr/bin/env python\nimport rospy\nfrom sensor_msgs.msg import Joy\n\nTo subscribe to the topic joy of type Joy, use the following\nstatement in your Python script:\nrospy.Subscriber(\"joy\", Joy, callback)\n\nThumrongsak Kosiyatrakul\n\nJoy Node\n\n\fExample\n\n#!/usr/bin/env python\nimport rospy\nfrom sensor_msgs.msg import Joy\ndef callback(data):\nprint data.buttons[0]\nprint data.axes[0]\ndef testJoy():\nrospy.init_node(\"joystick\", anonymous=True)\nrospy.Subscriber(\"joy\", Joy, callback)\nrospy.spin()\nif __name__ == '__main__':\ntestJoy()\n\nThumrongsak Kosiyatrakul\n\nJoy Node\n\n\fControlling a Kobuki\nA robot can be controlled by sending a message of type Twist\nTo import the data structure Twist, use the following command:\nfrom geometry_msgs.msg import Twist\n\nTo create a variable named command of type Twist, use the\nfollowing command:\ncommand = Twist()\n\nWe will only use two components:\ncommand.linear.x\nValue can be between -1.0 to 1.0\nPositive value makes the robot moves forward\nNegative value makes the robot moves backward\n\ncommand.angular.z\nValue can be between -1.0 to 1.0\nPositive value makes the robot turns to its left\nNegative value makes the robot turns to its right\nThumrongsak Kosiyatrakul\n\nJoy Node\n\n\fControlling a Kobuki\nTo control the robot, the message of type Twist must be publish\nto the following topic:\n/mobile_base/commands/velocity\n\nExamples:\nIf you want to make the robot moves forward in a straight line at\nhalf speed:\ncommand.linear.x = 0.5\ncommand.angular.z = 0.0\n\nFor example, if you want to make the robot makes a stationary\nturn to its left at half speed:\ncommand.linear.x = 0.0\ncommand.angular.z = 0.5\n\nFor example, if you want to make the robot moves forward and\nturn at the same time:\ncommand.linear.x = 0.5\ncommand.angular.z = 0.5\n\nThumrongsak Kosiyatrakul\n\nJoy Node\n\n\fUse Simulator (for now)\nROS allows you to see how robot moves in a virtual world\nFirst, run the following command in a console screen:\nroslaunch kobuki_softnode full.launch\nOpen a new console screen and run the following command:\nrosrun rviz rviz\n\nIn rviz\n1\n2\n\nOn the left pane, set Fixed Frame to /odom\nAt the bottom left corner, click Add and choose RobotModel\n\nYou should see an image of a Kobuki robot on your screen\nAt this point, if you publish a command of type Twist, robot\nwill move according to the command\n\nThumrongsak Kosiyatrakul\n\nJoy Node\n\n\f", "label": [[0, 8, "Concept"], [61, 69, "Concept"], [72, 80, "Concept"], [81, 94, "Concept"], [115, 123, "Concept"], [202, 210, "Concept"], [251, 256, "Concept"], [263, 266, "Concept"], [278, 286, "Concept"], [396, 399, "Concept"], [589, 597, "Concept"], [647, 655, "Concept"], [658, 667, "Concept"], [673, 681, "Concept"], [692, 700, "Concept"], [723, 726, "Concept"], [739, 746, "Concept"], [750, 753, "Concept"], [769, 777, "Concept"], [866, 872, "Concept"], [912, 916, "Concept"], [946, 953, "Concept"], [981, 989, "Concept"], [992, 999, "Concept"], [1024, 1031, "Concept"], [1064, 1070, "Concept"], [1145, 1151, "Concept"], [1166, 1172, "Concept"], [1212, 1220, "Concept"], [1223, 1227, "Concept"], [1267, 1271, "Concept"], [1304, 1310, "Concept"], [1347, 1351, "Concept"], [1373, 1377, "Concept"], [1407, 1411, "Concept"], [1434, 1438, "Concept"], [1526, 1534, "Concept"], [1537, 1546, "Concept"], [1574, 1582, "Concept"], [1637, 1646, "Concept"], [1782, 1788, "Concept"], [1853, 1857, "Concept"], [1904, 1911, "Concept"], [1974, 1982, "Concept"], [1985, 1994, "Concept"], [2025, 2028, "Concept"], [2176, 2179, "Concept"], [2201, 2210, "Concept"], [2213, 2222, "Concept"], [2341, 2349, "Concept"], [2424, 2427, "Concept"], [2572, 2575, "Concept"], [2664, 2672, "Concept"], [2689, 2695, "Concept"], [2698, 2703, "Concept"], [2746, 2756, "Concept"], [2786, 2791, "Concept"], [2850, 2855, "Concept"], [2895, 2905, "Concept"], [2986, 3002, "Concept"], [3128, 3145, "Concept"], [3304, 3312, "Concept"], [3329, 3335, "Concept"], [3351, 3356, "Concept"], [3373, 3383, "Concept"], [3417, 3422, "Concept"], [3544, 3560, "Concept"], [3567, 3584, "Concept"], [3686, 3702, "Concept"], [3709, 3726, "Concept"], [3818, 3834, "Concept"], [3841, 3858, "Concept"], [3892, 3900, "Concept"], [3907, 3916, "Concept"], [3927, 3930, "Concept"], [3953, 3958, "Concept"], [4140, 4144, "Concept"], [4145, 4149, "Concept"], [4154, 4158, "Concept"], [4296, 4308, "Concept"], [4367, 4377, "Concept"], [4379, 4384, "Concept"], [4447, 4455, "Concept"]], "Comments": []}