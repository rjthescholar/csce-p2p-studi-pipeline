unlabeled|cs1550|lec07
-DOCSTART- -X- -X- O

Introduction _ _ O
to _ _ O
Operating _ _ O
Systems _ _ O
CS _ _ O
/ _ _ O
COE _ _ O
1550 _ _ O
Spring _ _ O
2022 _ _ O


 _ _ O
Sherif _ _ O
Khattab _ _ O
ksm73@pitt.edu _ _ O
( _ _ O
Some _ _ O
slides _ _ O
are _ _ O
from _ _ O
Silberschatz _ _ O
, _ _ O
Galvin _ _ O
and _ _ O
Gagne _ _ O
© _ _ O
2013 _ _ O
) _ _ O

Announcements _ _ O
• _ _ O
Upcoming _ _ O
deadlines _ _ O
• _ _ O
Homework _ _ O
3 _ _ O
is _ _ O
due _ _ O
next _ _ O
Monday _ _ O
2 _ _ O
/ _ _ O
7 _ _ O
• _ _ O
Lab _ _ O
1 _ _ O
is _ _ O
due _ _ O
this _ _ O
Friday _ _ O
2 _ _ O
/ _ _ O
4 _ _ O
• _ _ O
Project _ _ O
1 _ _ O
due _ _ O
on _ _ O
2 _ _ O
/ _ _ O
18 _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O

Previous _ _ O
lecture _ _ O
… _ _ O
• _ _ O
Bounded _ _ O
buffer _ _ O
problem _ _ O
• _ _ O
semaphore-based _ _ O
solution _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O

Muddiest _ _ O
Points _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O

Problem _ _ O
of _ _ O
the _ _ O
Day _ _ O


 _ _ O
It _ _ O
is _ _ O
easy _ _ O
to _ _ O
make _ _ O
mistakes _ _ O
when _ _ O
using _ _ O
semaphores _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O

Produces _ _ O
Consumers _ _ O
Problem _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O

Solving _ _ O
Producers _ _ O
Consumers _ _ O
using _ _ O
Semaphores _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O

Is _ _ O
this _ _ O
sequence _ _ O
feasible _ _ O
? _ _ O
n _ _ O
= _ _ O
= _ _ O
3 _ _ O
for _ _ O
( _ _ O
i=0 _ _ O
; _ _ O
i _ _ O
< _ _ O
3 _ _ O
; _ _ O
i++ _ _ O
) _ _ O
{ _ _ O
Pi _ _ O
arrives _ _ O
Pi _ _ O
enters _ _ O
Pi _ _ O
leaves _ _ O
} _ _ O
P3 _ _ O
arrives _ _ O
C0 _ _ O
arrives _ _ O
C0 _ _ O
enters _ _ O
C0 _ _ O
leaves _ _ O
P3 _ _ O
enters _ _ O
P3 _ _ O
leaves _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O

Some _ _ O
thoughts _ _ O
• _ _ O
If _ _ O
we _ _ O
have _ _ O
one _ _ O
producer _ _ O
and _ _ O
one _ _ O
consumer _ _ O
• _ _ O
do _ _ O
we _ _ O
need _ _ O
count _ _ O
? _ _ O
• _ _ O
do _ _ O
we _ _ O
need _ _ O
the _ _ O
mutex _ _ O
? _ _ O


 _ _ O
• _ _ O
For _ _ O
multiple _ _ O
producers _ _ O
and _ _ O
consumers _ _ O
• _ _ O
what _ _ O
benefit _ _ O
do _ _ O
we _ _ O
get _ _ O
if _ _ O
we _ _ O
have _ _ O
one _ _ O
mutex _ _ O
for _ _ O
producers _ _ O
and _ _ O
one _ _ O
for _ _ O
consumers _ _ O
? _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O

Let _ _ O
’s _ _ O
make _ _ O
a _ _ O
“ _ _ O
small _ _ O
” _ _ O
change _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O

Let _ _ O
’s _ _ O
make _ _ O
a _ _ O
“ _ _ O
small _ _ O
” _ _ O
change _ _ O
Semaphore _ _ O
empty _ _ O
( _ _ O
n _ _ O
) _ _ O
, _ _ O
full _ _ O
( _ _ O
0 _ _ O
) _ _ O
; _ _ O
Mutex _ _ O
sem _ _ O
( _ _ O
1 _ _ O
) _ _ O
; _ _ O
Consumer _ _ O


 _ _ O
Producer _ _ O


 _ _ O
down _ _ O
( _ _ O
sem _ _ O
) _ _ O


 _ _ O
down _ _ O
( _ _ O
full _ _ O
) _ _ O


 _ _ O
down _ _ O
( _ _ O
empty _ _ O
) _ _ O


 _ _ O
down _ _ O
( _ _ O
sem _ _ O
) _ _ O


 _ _ O
buffer _ _ O
[ _ _ O
in _ _ O
] _ _ O
= _ _ O
new _ _ O
item _ _ O


 _ _ O
Item _ _ O
= _ _ O
buffer _ _ O
[ _ _ O
out _ _ O
] _ _ O


 _ _ O
in _ _ O
= _ _ O
( _ _ O
in _ _ O
+ _ _ O
1 _ _ O
) _ _ O
% _ _ O
n _ _ O


 _ _ O
out _ _ O
= _ _ O
( _ _ O
out _ _ O
+ _ _ O
1 _ _ O
) _ _ O
% _ _ O
n _ _ O


 _ _ O
count++ _ _ O


 _ _ O
count-- _ _ O


 _ _ O
up _ _ O
( _ _ O
empty _ _ O
) _ _ O


 _ _ O
up _ _ O
( _ _ O
sem _ _ O
) _ _ O


 _ _ O
up _ _ O
( _ _ O
sem _ _ O
) _ _ O


 _ _ O
up _ _ O
( _ _ O
full _ _ O
) _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O

Is _ _ O
this _ _ O
sequence _ _ O
feasible _ _ O
? _ _ O
n _ _ O
= _ _ O
= _ _ O
3 _ _ O
for _ _ O
( _ _ O
i=0 _ _ O
; _ _ O
i _ _ O
< _ _ O
3 _ _ O
; _ _ O
i++ _ _ O
) _ _ O
{ _ _ O
Pi _ _ O
arrives _ _ O
Pi _ _ O
enters _ _ O
Pi _ _ O
leaves _ _ O
} _ _ O
P3 _ _ O
arrives _ _ O
C0 _ _ O
arrives _ _ O
C0 _ _ O
enters _ _ O
C0 _ _ O
leaves _ _ O
P3 _ _ O
enters _ _ O
P3 _ _ O
leaves _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O

Solution _ _ O
• _ _ O
Condition _ _ O
Variable _ _ O
• _ _ O


 _ _ O
Yet _ _ O
another _ _ O
construct _ _ O
( _ _ O
Add _ _ O
to _ _ O
Spinlock _ _ O
and _ _ O
Semaphore _ _ O
) _ _ O


 _ _ O
• _ _ O


 _ _ O
Has _ _ O
3 _ _ O
operations _ _ O
• _ _ O
These _ _ O
3 _ _ O
operations _ _ O
have _ _ O
to _ _ O
be _ _ O
called _ _ O
while _ _ O
holding _ _ O
a _ _ O
mutex _ _ O
lock _ _ O
• _ _ O
wait _ _ O
( _ _ O
) _ _ O
• _ _ O
• _ _ O
• _ _ O
• _ _ O


 _ _ O
unlock _ _ O
mutex _ _ O
block _ _ O
process _ _ O
when _ _ O
awake _ _ O
, _ _ O
relock _ _ O
mutex _ _ O
when _ _ O
successful _ _ O
, _ _ O
return _ _ O


 _ _ O
• _ _ O
signal _ _ O
( _ _ O
) _ _ O
• _ _ O


 _ _ O
wakeup _ _ O
one _ _ O
waiting _ _ O
process _ _ O
in _ _ O
the _ _ O
condition _ _ O
variable _ _ O
’s _ _ O
queue _ _ O
if _ _ O
any _ _ O


 _ _ O
• _ _ O
broadcast _ _ O
( _ _ O
) _ _ O
• _ _ O


 _ _ O
• _ _ O


 _ _ O
wakeup _ _ O
all _ _ O
waiting _ _ O
processes _ _ O
in _ _ O
the _ _ O
condition _ _ O
variable _ _ O
’s _ _ O
queue _ _ O
if _ _ O
any _ _ O


 _ _ O
Not _ _ O
foreign _ _ O
to _ _ O
us _ _ O
at _ _ O
all _ _ O
• _ _ O
Every _ _ O
object _ _ O
variable _ _ O
in _ _ O
Java _ _ O
is _ _ O
a _ _ O
Condition _ _ O
Variable _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O

Solving _ _ O
Bounded _ _ O
Buffer _ _ O
Using _ _ O
Condition _ _ O
Variables _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O



