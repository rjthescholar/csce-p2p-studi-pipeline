unlabeled|cs1550|lec19
-DOCSTART- -X- -X- O

Introduction _ _ O
to _ _ O
Operating _ _ O
Systems _ _ O
CS _ _ O
1550 _ _ O
Spring _ _ O
2022 _ _ O


 _ _ O
Sherif _ _ O
Khattab _ _ O
ksm73@pitt.edu _ _ O
( _ _ O
Some _ _ O
slides _ _ O
are _ _ O
from _ _ O
Silberschatz _ _ O
, _ _ O
Galvin _ _ O
and _ _ O
Gagne _ _ O
© _ _ O
2013 _ _ O
) _ _ O

Announcements _ _ O
• _ _ O
Upcoming _ _ O
deadlines _ _ O
: _ _ O
• _ _ O
Lab _ _ O
3 _ _ O
: _ _ O
due _ _ O
on _ _ O
4 _ _ O
/ _ _ O
1 _ _ O
• _ _ O
Homework _ _ O
9 _ _ O
: _ _ O
due _ _ O
on _ _ O
4 _ _ O
/ _ _ O
4 _ _ O
• _ _ O
Project _ _ O
3 _ _ O
: _ _ O
due _ _ O
on _ _ O
4 _ _ O
/ _ _ O
11 _ _ O


 _ _ O
CS _ _ O
/ _ _ O
COE _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
2 _ _ O

Previous _ _ O
lecture _ _ O
… _ _ O
• _ _ O
The _ _ O
problem _ _ O
of _ _ O
large _ _ O
page _ _ O
tables _ _ O


 _ _ O
CS _ _ O
/ _ _ O
COE _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
3 _ _ O

Muddiest _ _ O
Points _ _ O
( _ _ O
1 _ _ O
/ _ _ O
2 _ _ O
) _ _ O
• _ _ O
How _ _ O
to _ _ O
determine _ _ O
number _ _ O
of _ _ O
bits _ _ O
( _ _ O
2^n _ _ O
) _ _ O
from _ _ O
day _ _ O
4 _ _ O
gb _ _ O
or _ _ O
4 _ _ O
kb _ _ O


 _ _ O
• _ _ O
Calculating _ _ O
the _ _ O
PTE _ _ O
frame _ _ O
number _ _ O
size _ _ O
. _ _ O
• _ _ O
calculating _ _ O
the _ _ O
number _ _ O
of _ _ O
frames _ _ O
• _ _ O
userspace _ _ O
page _ _ O
replacement _ _ O
• _ _ O
For _ _ O
the _ _ O
final _ _ O
top _ _ O
hat _ _ O
question _ _ O
, _ _ O
how _ _ O
did _ _ O
we _ _ O
get _ _ O
24 _ _ O
in _ _ O
the _ _ O
answer _ _ O
24* _ _ O
( _ _ O
2^20 _ _ O
) _ _ O
? _ _ O
I _ _ O
understand _ _ O
that _ _ O
we _ _ O
did _ _ O
log _ _ O
( _ _ O
2^20 _ _ O
) _ _ O
to _ _ O
get _ _ O
20 _ _ O
, _ _ O
but _ _ O
where _ _ O
did _ _ O
the _ _ O
extra _ _ O
4 _ _ O
come _ _ O
from _ _ O
? _ _ O
• _ _ O
I _ _ O
do _ _ O
n't _ _ O
understand _ _ O
the _ _ O
last _ _ O
two _ _ O
examples _ _ O
about _ _ O
calculating _ _ O
the _ _ O
PTE _ _ O
s _ _ O
and _ _ O
frames _ _ O
, _ _ O
what _ _ O
information _ _ O
( _ _ O
values _ _ O
) _ _ O
do _ _ O
we _ _ O
need _ _ O
to _ _ O
look _ _ O
at _ _ O
in _ _ O
terms _ _ O
of _ _ O
different _ _ O
questions _ _ O
? _ _ O
• _ _ O
Could _ _ O
you _ _ O
list _ _ O
the _ _ O
formulas _ _ O
for _ _ O
page _ _ O
table _ _ O
entries _ _ O
? _ _ O
CS _ _ O
/ _ _ O
COE _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
4 _ _ O

Muddiest _ _ O
Points _ _ O
( _ _ O
2 _ _ O
/ _ _ O
2 _ _ O
) _ _ O
• _ _ O
In _ _ O
the _ _ O
OPT _ _ O
simulation _ _ O
, _ _ O
why _ _ O
do _ _ O
we _ _ O
only _ _ O
re _ _ O
order _ _ O
the _ _ O
pages _ _ O
above _ _ O
the _ _ O
one _ _ O
we _ _ O
want _ _ O
? _ _ O
Would _ _ O
n't _ _ O
it _ _ O
be _ _ O
better _ _ O
to _ _ O
re _ _ O
order _ _ O
everything _ _ O
? _ _ O
• _ _ O
OPT _ _ O
trace _ _ O
was _ _ O
slightly _ _ O
confusing _ _ O
of _ _ O
what _ _ O
switches _ _ O
where _ _ O
• _ _ O
How _ _ O
to _ _ O
find _ _ O
the _ _ O
number _ _ O
of _ _ O
writes _ _ O
for _ _ O
LRU _ _ O
and _ _ O
OPT _ _ O
? _ _ O
• _ _ O
How _ _ O
to _ _ O
calculate _ _ O
the _ _ O
distance _ _ O
in _ _ O
the _ _ O
tables _ _ O
we _ _ O
made _ _ O
• _ _ O
Are _ _ O
local _ _ O
or _ _ O
global _ _ O
selection _ _ O
policies _ _ O
more _ _ O
common _ _ O
in _ _ O
modern _ _ O
OS _ _ O
’s _ _ O
? _ _ O


 _ _ O
CS _ _ O
/ _ _ O
COE _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
5 _ _ O

Problem _ _ O
of _ _ O
the _ _ O
Day _ _ O


 _ _ O
• _ _ O
How _ _ O
to _ _ O
keep _ _ O
track _ _ O
of _ _ O
larger _ _ O
page _ _ O
tables _ _ O
that _ _ O
can _ _ O
store _ _ O
more _ _ O
pages _ _ O
• _ _ O
How _ _ O
big _ _ O
can _ _ O
a _ _ O
page _ _ O
table _ _ O
be _ _ O
? _ _ O
• _ _ O
64-bit _ _ O
machine _ _ O
• _ _ O
4 _ _ O
KB _ _ O
page _ _ O
size _ _ O


 _ _ O
• _ _ O
How _ _ O
many _ _ O
pages _ _ O
? _ _ O
• _ _ O
How _ _ O
many _ _ O
PTE _ _ O
? _ _ O
• _ _ O
How _ _ O
big _ _ O
is _ _ O
a _ _ O
PTE _ _ O
? _ _ O
• _ _ O
How _ _ O
big _ _ O
is _ _ O
the _ _ O
page _ _ O
table _ _ O
of _ _ O
one _ _ O
process _ _ O
? _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
6 _ _ O

Address _ _ O
Translation _ _ O
Structures _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
7 _ _ O

Memory _ _ O
& _ _ O
paging _ _ O
structures _ _ O
Physical _ _ O
memory _ _ O


 _ _ O
Page _ _ O
frame _ _ O
number _ _ O


 _ _ O
Page _ _ O
0 _ _ O
Page _ _ O
1 _ _ O
Page _ _ O
2 _ _ O
Page _ _ O
3 _ _ O
Page _ _ O
4 _ _ O
Logical _ _ O
memory _ _ O
( _ _ O
P0 _ _ O
) _ _ O


 _ _ O
6 _ _ O
3 _ _ O
4 _ _ O
9 _ _ O
2 _ _ O
Page _ _ O
table _ _ O
( _ _ O
P0 _ _ O
) _ _ O


 _ _ O
Page _ _ O
0 _ _ O
Page _ _ O
1 _ _ O


 _ _ O
8 _ _ O
0 _ _ O


 _ _ O
Logical _ _ O
memory _ _ O
( _ _ O
P1 _ _ O
) _ _ O


 _ _ O
Page _ _ O
table _ _ O
( _ _ O
P1 _ _ O
) _ _ O


 _ _ O
0 _ _ O


 _ _ O
Page _ _ O
1 _ _ O
( _ _ O
P1 _ _ O
) _ _ O


 _ _ O
1 _ _ O
2 _ _ O
3 _ _ O


 _ _ O
Free _ _ O
pages _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
4 _ _ O


 _ _ O
Page _ _ O
4 _ _ O
( _ _ O
P0 _ _ O
) _ _ O
Page _ _ O
1 _ _ O
( _ _ O
P0 _ _ O
) _ _ O
Page _ _ O
2 _ _ O
( _ _ O
P0 _ _ O
) _ _ O


 _ _ O
5 _ _ O
6 _ _ O


 _ _ O
Page _ _ O
0 _ _ O
( _ _ O
P0 _ _ O
) _ _ O


 _ _ O
7 _ _ O
8 _ _ O
9 _ _ O


 _ _ O
Page _ _ O
0 _ _ O
( _ _ O
P1 _ _ O
) _ _ O
Page _ _ O
3 _ _ O
( _ _ O
P0 _ _ O
) _ _ O


 _ _ O
8 _ _ O

Mapping _ _ O
logical _ _ O
= _ _ O
> _ _ O
physical _ _ O
address _ _ O
◼ _ _ O


 _ _ O
Split _ _ O
address _ _ O
from _ _ O
CPU _ _ O
into _ _ O
two _ _ O
pieces _ _ O
Page _ _ O
number _ _ O
( _ _ O
p _ _ O
) _ _ O
◼ _ _ O
Page _ _ O
offset _ _ O
( _ _ O
d _ _ O
) _ _ O
◼ _ _ O


 _ _ O
◼ _ _ O


 _ _ O
Page _ _ O
number _ _ O


 _ _ O
Example _ _ O
: _ _ O
• _ _ O
4 _ _ O
KB _ _ O
( _ _ O
= _ _ O
4096 _ _ O
byte _ _ O
) _ _ O
pages _ _ O
• _ _ O
32 _ _ O
bit _ _ O
logical _ _ O
addresses _ _ O


 _ _ O
Index _ _ O
into _ _ O
page _ _ O
table _ _ O
2d _ _ O
= _ _ O
4096 _ _ O
◼ _ _ O
Page _ _ O
table _ _ O
contains _ _ O
base _ _ O
address _ _ O
of _ _ O
page _ _ O
in _ _ O
physical _ _ O
memory _ _ O
◼ _ _ O


 _ _ O
◼ _ _ O


 _ _ O
Page _ _ O
offset _ _ O
◼ _ _ O


 _ _ O
◼ _ _ O


 _ _ O
d _ _ O
= _ _ O
12 _ _ O


 _ _ O
Added _ _ O
to _ _ O
base _ _ O
address _ _ O
to _ _ O
get _ _ O
actual _ _ O
physical _ _ O
memory _ _ O
address _ _ O


 _ _ O
32 _ _ O
- _ _ O
12 _ _ O
= _ _ O
20 _ _ O
bits _ _ O


 _ _ O
12 _ _ O
bits _ _ O


 _ _ O
p _ _ O


 _ _ O
d _ _ O


 _ _ O
Page _ _ O
size _ _ O
= _ _ O
2d _ _ O
bytes _ _ O


 _ _ O
32 _ _ O
bit _ _ O
logical _ _ O
address _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
9 _ _ O

Address _ _ O
translation _ _ O
architecture _ _ O
page _ _ O
number _ _ O


 _ _ O
CPU _ _ O


 _ _ O
p _ _ O


 _ _ O
Page _ _ O
frame _ _ O
number _ _ O


 _ _ O
Page _ _ O
frame _ _ O
number _ _ O


 _ _ O
page _ _ O
offset _ _ O


 _ _ O
d _ _ O
0 _ _ O
1 _ _ O
p-1 _ _ O
p _ _ O
p+1 _ _ O


 _ _ O
f _ _ O


 _ _ O
d _ _ O


 _ _ O
.. _ _ O
. _ _ O


 _ _ O
.. _ _ O
. _ _ O
f _ _ O


 _ _ O
.. _ _ O
. _ _ O


 _ _ O
0 _ _ O
1 _ _ O


 _ _ O
f-1 _ _ O
f _ _ O
f+1 _ _ O
f+2 _ _ O


 _ _ O
physical _ _ O
memory _ _ O
page _ _ O
table _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
10 _ _ O

Memory _ _ O
Sizes _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
11 _ _ O

Address _ _ O
Translation _ _ O
Relations _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
12 _ _ O

Page _ _ O
number _ _ O
vs. _ _ O
Offset _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
13 _ _ O

Solution _ _ O
1 _ _ O
: _ _ O
Two-level _ _ O
page _ _ O
tables _ _ O
◼ _ _ O


 _ _ O
Problem _ _ O
: _ _ O
page _ _ O
tables _ _ O
can _ _ O
be _ _ O
too _ _ O
large _ _ O
◼ _ _ O


 _ _ O
◼ _ _ O


 _ _ O
◼ _ _ O


 _ _ O
◼ _ _ O


 _ _ O
220 _ _ O
657 _ _ O


 _ _ O
Solution _ _ O
: _ _ O
use _ _ O
multi-level _ _ O
page _ _ O
tables _ _ O
◼ _ _ O


 _ _ O
◼ _ _ O


 _ _ O
232 _ _ O
bytes _ _ O
in _ _ O
4 _ _ O
KB _ _ O
pages _ _ O
need _ _ O
1 _ _ O
million _ _ O
PTEs _ _ O


 _ _ O
“ _ _ O
Page _ _ O
size _ _ O
” _ _ O
in _ _ O
first _ _ O
page _ _ O
table _ _ O
is _ _ O
large _ _ O
( _ _ O
megabytes _ _ O
) _ _ O
PTE _ _ O
marked _ _ O
invalid _ _ O
in _ _ O
first _ _ O
page _ _ O
table _ _ O
needs _ _ O
no _ _ O
2nd _ _ O
level _ _ O
page _ _ O
table _ _ O


 _ _ O
.. _ _ O
. _ _ O


 _ _ O
401 _ _ O


 _ _ O
.. _ _ O
. _ _ O


 _ _ O
1st _ _ O
level _ _ O
page _ _ O
table _ _ O
has _ _ O
pointers _ _ O
to _ _ O
1st _ _ O
level _ _ O
2nd _ _ O
level _ _ O
page _ _ O
tables _ _ O
page _ _ O
table _ _ O
2nd _ _ O
level _ _ O
page _ _ O
table _ _ O
has _ _ O
actual _ _ O
physical _ _ O
page _ _ O
numbers _ _ O
in _ _ O
it _ _ O
2nd _ _ O
level _ _ O
page _ _ O
tables _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
125 _ _ O
613 _ _ O


 _ _ O
.. _ _ O
. _ _ O


 _ _ O
961 _ _ O
884 _ _ O
960 _ _ O


 _ _ O
.. _ _ O
. _ _ O


 _ _ O
955 _ _ O


 _ _ O
.. _ _ O
. _ _ O
.. _ _ O
. _ _ O
.. _ _ O
. _ _ O
.. _ _ O
. _ _ O
.. _ _ O
. _ _ O
.. _ _ O
. _ _ O
.. _ _ O
. _ _ O
.. _ _ O
. _ _ O
.. _ _ O
. _ _ O
main _ _ O
memory _ _ O
14 _ _ O

Two-level _ _ O
Page _ _ O
Table _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
15 _ _ O

More _ _ O
on _ _ O
two-level _ _ O
page _ _ O
tables _ _ O
◼ _ _ O


 _ _ O
Tradeoffs _ _ O
between _ _ O
1st _ _ O
and _ _ O
2nd _ _ O
level _ _ O
page _ _ O
table _ _ O
sizes _ _ O
Total _ _ O
number _ _ O
of _ _ O
bits _ _ O
indexing _ _ O
1st _ _ O
and _ _ O
2nd _ _ O
level _ _ O
table _ _ O
is _ _ O
constant _ _ O
for _ _ O
a _ _ O
given _ _ O
page _ _ O
size _ _ O
and _ _ O
logical _ _ O
address _ _ O
length _ _ O
◼ _ _ O
Tradeoff _ _ O
between _ _ O
number _ _ O
of _ _ O
bits _ _ O
indexing _ _ O
1st _ _ O
and _ _ O
number _ _ O
indexing _ _ O
2nd _ _ O
level _ _ O
tables _ _ O
◼ _ _ O


 _ _ O
More _ _ O
bits _ _ O
in _ _ O
1st _ _ O
level _ _ O
: _ _ O
fine _ _ O
granularity _ _ O
at _ _ O
2nd _ _ O
level _ _ O
◼ _ _ O
Fewer _ _ O
bits _ _ O
in _ _ O
1st _ _ O
level _ _ O
: _ _ O
maybe _ _ O
less _ _ O
wasted _ _ O
space _ _ O
? _ _ O
◼ _ _ O


 _ _ O
All _ _ O
addresses _ _ O
in _ _ O
table _ _ O
are _ _ O
physical _ _ O
addresses _ _ O
◼ _ _ O
Protection _ _ O
bits _ _ O
kept _ _ O
in _ _ O
2nd _ _ O
level _ _ O
table _ _ O
◼ _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
16 _ _ O

Two-level _ _ O
paging _ _ O
: _ _ O
example _ _ O
◼ _ _ O


 _ _ O
System _ _ O
characteristics _ _ O
◼ _ _ O
◼ _ _ O


 _ _ O
◼ _ _ O


 _ _ O
Page _ _ O
number _ _ O
divided _ _ O
into _ _ O
: _ _ O
◼ _ _ O
◼ _ _ O


 _ _ O
◼ _ _ O


 _ _ O
8 _ _ O
KB _ _ O
pages _ _ O
32-bit _ _ O
logical _ _ O
address _ _ O
divided _ _ O
into _ _ O
13 _ _ O
bit _ _ O
page _ _ O
offset _ _ O
, _ _ O
19 _ _ O
bit _ _ O
page _ _ O
number _ _ O
10 _ _ O
bit _ _ O
page _ _ O
number _ _ O
9 _ _ O
bit _ _ O
page _ _ O
offset _ _ O


 _ _ O
Logical _ _ O
address _ _ O
looks _ _ O
like _ _ O
this _ _ O
: _ _ O
◼ _ _ O
◼ _ _ O


 _ _ O
p1 _ _ O
is _ _ O
an _ _ O
index _ _ O
into _ _ O
the _ _ O
1st _ _ O
level _ _ O
page _ _ O
table _ _ O
p2 _ _ O
is _ _ O
an _ _ O
index _ _ O
into _ _ O
the _ _ O
2nd _ _ O
level _ _ O
page _ _ O
table _ _ O
pointed _ _ O
to _ _ O
by _ _ O
p1 _ _ O


 _ _ O
page _ _ O
number _ _ O
p1 _ _ O
= _ _ O
10 _ _ O
bits _ _ O


 _ _ O
p2 _ _ O
= _ _ O
9 _ _ O
bits _ _ O


 _ _ O
page _ _ O
offset _ _ O
offset _ _ O
= _ _ O
13 _ _ O
bits _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
17 _ _ O

2-level _ _ O
address _ _ O
translation _ _ O
example _ _ O
page _ _ O
number _ _ O
p1 _ _ O
= _ _ O
10 _ _ O
bits _ _ O


 _ _ O
Page _ _ O
table _ _ O
base _ _ O


 _ _ O
page _ _ O
offset _ _ O


 _ _ O
p2 _ _ O
= _ _ O
9 _ _ O
bits _ _ O


 _ _ O
offset _ _ O
= _ _ O
13 _ _ O
bits _ _ O


 _ _ O
frame _ _ O
number _ _ O
0 _ _ O
1 _ _ O


 _ _ O
physical _ _ O
address _ _ O


 _ _ O
19 _ _ O


 _ _ O
0 _ _ O
1 _ _ O
p1 _ _ O


 _ _ O
.. _ _ O
. _ _ O


 _ _ O
0 _ _ O
1 _ _ O


 _ _ O
.. _ _ O
. _ _ O


 _ _ O
p2 _ _ O


 _ _ O
1st _ _ O
level _ _ O
page _ _ O
table _ _ O


 _ _ O
13 _ _ O


 _ _ O
.. _ _ O
. _ _ O
.. _ _ O
. _ _ O


 _ _ O
.. _ _ O
. _ _ O
.. _ _ O
. _ _ O
main _ _ O
memory _ _ O


 _ _ O
2nd _ _ O
level _ _ O
page _ _ O
table _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
18 _ _ O

Address _ _ O
Translation _ _ O
: _ _ O
2-level _ _ O
Page _ _ O
Table _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
19 _ _ O

TLB _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
20 _ _ O

Translation _ _ O
Lookaside _ _ O
Buffer _ _ O
( _ _ O
TLB _ _ O
) _ _ O
◼ _ _ O


 _ _ O
Search _ _ O
the _ _ O
TLB _ _ O
for _ _ O
the _ _ O
desired _ _ O
logical _ _ O
page _ _ O
number _ _ O
◼ _ _ O
◼ _ _ O


 _ _ O
◼ _ _ O


 _ _ O
◼ _ _ O


 _ _ O
Search _ _ O
entries _ _ O
in _ _ O
parallel _ _ O
Use _ _ O
standard _ _ O
cache _ _ O
techniques _ _ O


 _ _ O
If _ _ O
desired _ _ O
logical _ _ O
page _ _ O
number _ _ O
is _ _ O
found _ _ O
, _ _ O
get _ _ O
frame _ _ O
number _ _ O
from _ _ O
TLB _ _ O
If _ _ O
desired _ _ O
logical _ _ O
page _ _ O
number _ _ O
is _ _ O
n’t _ _ O
found _ _ O
◼ _ _ O


 _ _ O
◼ _ _ O


 _ _ O
Get _ _ O
frame _ _ O
number _ _ O
from _ _ O
page _ _ O
table _ _ O
in _ _ O
memory _ _ O
Replace _ _ O
an _ _ O
entry _ _ O
in _ _ O
the _ _ O
TLB _ _ O
with _ _ O
the _ _ O
logical _ _ O
& _ _ O
physical _ _ O
page _ _ O
numbers _ _ O
from _ _ O
this _ _ O
reference _ _ O


 _ _ O
Logical _ _ O
page _ _ O
# _ _ O


 _ _ O
Physical _ _ O
frame _ _ O
# _ _ O


 _ _ O
8 _ _ O
unused _ _ O
2 _ _ O
3 _ _ O
12 _ _ O
29 _ _ O
22 _ _ O
7 _ _ O


 _ _ O
3 _ _ O
1 _ _ O
0 _ _ O
12 _ _ O
6 _ _ O
11 _ _ O
4 _ _ O


 _ _ O
Example _ _ O
TLB _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
21 _ _ O

Handling _ _ O
TLB _ _ O
misses _ _ O
If _ _ O
PTE _ _ O
is _ _ O
n’t _ _ O
found _ _ O
in _ _ O
TLB _ _ O
, _ _ O
OS _ _ O
needs _ _ O
to _ _ O
do _ _ O
the _ _ O
lookup _ _ O
in _ _ O
the _ _ O
page _ _ O
table _ _ O
◼ _ _ O
Lookup _ _ O
can _ _ O
be _ _ O
done _ _ O
in _ _ O
hardware _ _ O
or _ _ O
software _ _ O
◼ _ _ O
Hardware _ _ O
TLB _ _ O
replacement _ _ O
◼ _ _ O


 _ _ O
CPU _ _ O
hardware _ _ O
does _ _ O
page _ _ O
table _ _ O
lookup _ _ O
◼ _ _ O
Can _ _ O
be _ _ O
faster _ _ O
than _ _ O
software _ _ O
◼ _ _ O
Less _ _ O
flexible _ _ O
than _ _ O
software _ _ O
, _ _ O
and _ _ O
more _ _ O
complex _ _ O
hardware _ _ O
◼ _ _ O


 _ _ O
◼ _ _ O


 _ _ O
Software _ _ O
TLB _ _ O
replacement _ _ O
OS _ _ O
gets _ _ O
TLB _ _ O
exception _ _ O
◼ _ _ O
Exception _ _ O
handler _ _ O
does _ _ O
page _ _ O
table _ _ O
lookup _ _ O
& _ _ O
places _ _ O
the _ _ O
result _ _ O
into _ _ O
the _ _ O
TLB _ _ O
◼ _ _ O
Program _ _ O
continues _ _ O
after _ _ O
return _ _ O
from _ _ O
exception _ _ O
◼ _ _ O
Larger _ _ O
TLB _ _ O
( _ _ O
lower _ _ O
miss _ _ O
rate _ _ O
) _ _ O
can _ _ O
make _ _ O
this _ _ O
feasible _ _ O
◼ _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
22 _ _ O

How _ _ O
long _ _ O
do _ _ O
memory _ _ O
accesses _ _ O
take _ _ O
? _ _ O
◼ _ _ O


 _ _ O
Assume _ _ O
the _ _ O
following _ _ O
times _ _ O
: _ _ O
TLB _ _ O
lookup _ _ O
time _ _ O
= _ _ O
a _ _ O
( _ _ O
often _ _ O
zero _ _ O
- _ _ O
overlapped _ _ O
in _ _ O
CPU _ _ O
) _ _ O
◼ _ _ O
Memory _ _ O
access _ _ O
time _ _ O
= _ _ O
m _ _ O
◼ _ _ O


 _ _ O
◼ _ _ O


 _ _ O
Hit _ _ O
ratio _ _ O
( _ _ O
h _ _ O
) _ _ O
is _ _ O
percentage _ _ O
of _ _ O
time _ _ O
that _ _ O
a _ _ O
logical _ _ O
page _ _ O
number _ _ O
is _ _ O
found _ _ O
in _ _ O
the _ _ O
TLB _ _ O
Larger _ _ O
TLB _ _ O
usually _ _ O
means _ _ O
higher _ _ O
h _ _ O
◼ _ _ O
TLB _ _ O
structure _ _ O
can _ _ O
affect _ _ O
h _ _ O
as _ _ O
well _ _ O
◼ _ _ O


 _ _ O
◼ _ _ O


 _ _ O
Effective _ _ O
access _ _ O
time _ _ O
( _ _ O
an _ _ O
average _ _ O
) _ _ O
is _ _ O
calculated _ _ O
as _ _ O
: _ _ O
EAT _ _ O
= _ _ O
( _ _ O
m _ _ O
+ _ _ O
a _ _ O
) _ _ O
h _ _ O
+ _ _ O
( _ _ O
m _ _ O
+ _ _ O
m _ _ O
+ _ _ O
a _ _ O
) _ _ O
( _ _ O
1-h _ _ O
) _ _ O
◼ _ _ O
EAT _ _ O
= _ _ O
a _ _ O
+ _ _ O
( _ _ O
2-h _ _ O
) _ _ O
m _ _ O
◼ _ _ O


 _ _ O
◼ _ _ O


 _ _ O
Interpretation _ _ O
Reference _ _ O
always _ _ O
requires _ _ O
TLB _ _ O
lookup _ _ O
, _ _ O
1 _ _ O
memory _ _ O
access _ _ O
◼ _ _ O
TLB _ _ O
misses _ _ O
also _ _ O
require _ _ O
an _ _ O
additional _ _ O
memory _ _ O
reference _ _ O
◼ _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
23 _ _ O

Effective _ _ O
Access _ _ O
Time _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
24 _ _ O

EAT _ _ O
Calculation _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
25 _ _ O

Solution _ _ O
2 _ _ O
: _ _ O
Inverted _ _ O
page _ _ O
table _ _ O
Reduce _ _ O
page _ _ O
table _ _ O
size _ _ O
further _ _ O
: _ _ O
keep _ _ O
one _ _ O
entry _ _ O
for _ _ O
each _ _ O
frame _ _ O
in _ _ O
memory _ _ O
◼ _ _ O
PTE _ _ O
contains _ _ O
◼ _ _ O


 _ _ O
Virtual _ _ O
address _ _ O
pointing _ _ O
to _ _ O
this _ _ O
frame _ _ O
◼ _ _ O
Information _ _ O
about _ _ O
the _ _ O
process _ _ O
that _ _ O
owns _ _ O
this _ _ O
page _ _ O
◼ _ _ O


 _ _ O
◼ _ _ O


 _ _ O
Search _ _ O
page _ _ O
table _ _ O
by _ _ O
Hashing _ _ O
the _ _ O
virtual _ _ O
page _ _ O
number _ _ O
and _ _ O
process _ _ O
ID _ _ O
◼ _ _ O
Starting _ _ O
at _ _ O
the _ _ O
entry _ _ O
corresponding _ _ O
to _ _ O
the _ _ O
hash _ _ O
result _ _ O
◼ _ _ O
Search _ _ O
until _ _ O
either _ _ O
the _ _ O
entry _ _ O
is _ _ O
found _ _ O
or _ _ O
a _ _ O
limit _ _ O
is _ _ O
reached _ _ O
◼ _ _ O


 _ _ O
Page _ _ O
frame _ _ O
number _ _ O
is _ _ O
index _ _ O
of _ _ O
PTE _ _ O
◼ _ _ O
Improve _ _ O
performance _ _ O
by _ _ O
using _ _ O
more _ _ O
advanced _ _ O
hashing _ _ O
algorithms _ _ O
◼ _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
26 _ _ O

Inverted _ _ O
page _ _ O
table _ _ O
architecture _ _ O


 _ _ O
process _ _ O
ID _ _ O


 _ _ O
pid _ _ O


 _ _ O
page _ _ O
number _ _ O


 _ _ O
page _ _ O
offset _ _ O


 _ _ O
p _ _ O
= _ _ O
19 _ _ O
bits _ _ O


 _ _ O
offset _ _ O
= _ _ O
13 _ _ O
bits _ _ O


 _ _ O
p _ _ O
search _ _ O
0 _ _ O
1 _ _ O
k _ _ O


 _ _ O
physical _ _ O
address _ _ O
19 _ _ O
13 _ _ O
pid0 _ _ O
pid1 _ _ O
pidk _ _ O


 _ _ O
p0 _ _ O


 _ _ O
.. _ _ O
. _ _ O
.. _ _ O
. _ _ O


 _ _ O
.. _ _ O
. _ _ O


 _ _ O
.. _ _ O
. _ _ O


 _ _ O
p1 _ _ O
pk _ _ O


 _ _ O
Page _ _ O
frame _ _ O
number _ _ O
0 _ _ O
1 _ _ O


 _ _ O
k _ _ O


 _ _ O
main _ _ O
memory _ _ O


 _ _ O
inverted _ _ O
page _ _ O
table _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
27 _ _ O

Inverted _ _ O
Page _ _ O
Table _ _ O
Example _ _ O


 _ _ O
CS _ _ O
1550 _ _ O
– _ _ O
Operating _ _ O
Systems _ _ O
– _ _ O
Sherif _ _ O
Khattab _ _ O


 _ _ O
28 _ _ O



