{"id": 27, "segment": ["train_set", "labeled"], "course": "cs1550", "lec": "lec07", "text": "Introduction to Operating Systems\nCS/COE 1550\nSpring 2022\n\nSherif Khattab\nksm73@pitt.edu\n(Some slides are from Silberschatz, Galvin and Gagne \u00a92013)\n\nAnnouncements\n\u2022 Upcoming deadlines\n\u2022 Homework 3 is due next Monday 2/7\n\u2022 Lab 1 is due this Friday 2/4\n\u2022 Project 1 due on 2/18\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nPrevious lecture ...\n\u2022 Bounded buffer problem\n\u2022 semaphore-based solution\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nMuddiest Points\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nProblem of the Day\n\nIt is easy to make mistakes when using semaphores\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nProduces Consumers Problem\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nSolving Producers Consumers using Semaphores\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nIs this sequence feasible?\nn == 3\nfor (i=0; i<3; i++){\nPi arrives\nPi enters\nPi leaves\n}\nP3 arrives\nC0 arrives\nC0 enters\nC0 leaves\nP3 enters\nP3 leaves\nCS 1550 - Operating Systems - Sherif Khattab\n\nSome thoughts\n\u2022 If we have one producer and one consumer\n\u2022 do we need count?\n\u2022 do we need the mutex?\n\n\u2022 For multiple producers and consumers\n\u2022 what benefit do we get if we have one mutex for\nproducers and one for consumers?\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nLet's make a \"small\" change\n\nCS 1550 - Operating Systems - Sherif Khattab\n\nLet's make a \"small\" change\nSemaphore empty(n), full(0);\nMutex sem(1);\nConsumer\n\nProducer\n\ndown(sem)\n\ndown(full)\n\ndown(empty)\n\ndown(sem)\n\nbuffer[in] = new item\n\nItem = buffer[out]\n\nin = (in + 1) % n\n\nout = (out + 1) % n\n\ncount++\n\ncount--\n\nup(empty)\n\nup(sem)\n\nup(sem)\n\nup(full)\nCS 1550 - Operating Systems - Sherif Khattab\n\nIs this sequence feasible?\nn == 3\nfor (i=0; i<3; i++){\nPi arrives\nPi enters\nPi leaves\n}\nP3 arrives\nC0 arrives\nC0 enters\nC0 leaves\nP3 enters\nP3 leaves\nCS 1550 - Operating Systems - Sherif Khattab\n\nSolution\n\u2022 Condition Variable\n\u2022\n\nYet another construct (Add to Spinlock and Semaphore)\n\n\u2022\n\nHas 3 operations\n\u2022 These 3 operations have to be called while holding a mutex lock\n\u2022 wait()\n\u2022\n\u2022\n\u2022\n\u2022\n\nunlock mutex\nblock process\nwhen awake, relock mutex\nwhen successful, return\n\n\u2022 signal()\n\u2022\n\nwakeup one waiting process in the condition variable's queue if any\n\n\u2022 broadcast()\n\u2022\n\n\u2022\n\nwakeup all waiting processes in the condition variable's queue if any\n\nNot foreign to us at all\n\u2022 Every object variable in Java is a Condition Variable\nCS 1550 - Operating Systems - Sherif Khattab\n\nSolving Bounded Buffer Using Condition Variables\n\nCS 1550 - Operating Systems - Sherif Khattab\n\n", "label": [[346, 368, "Concept"], [346, 360, "Concept"], [2428, 2442, "Concept"], [371, 380, "Concept"], [1359, 1368, "Concept"], [1926, 1935, "Concept"], [1861, 1879, "Concept"], [2167, 2185, "Concept"], [2258, 2276, "Concept"], [2355, 2373, "Concept"], [2026, 2030, "Concept"], [2121, 2127, "Concept"], [2204, 2213, "Concept"], [1079, 1084, "Concept"], [1166, 1171, "Concept"], [1388, 1393, "Concept"], [2013, 2018, "Concept"], [2049, 2054, "Concept"], [2088, 2093, "Concept"], [2013, 2023, "Concept"], [1913, 1921, "Concept"], [1016, 1024, "Concept"], [1412, 1420, "Concept"], [1033, 1041, "Concept"], [1402, 1410, "Concept"], [1570, 1572, "Concept"], [1581, 1583, "Concept"], [1590, 1592, "Concept"], [1599, 1601, "Concept"], [1422, 1426, "Concept"], [1433, 1437, "Concept"], [1445, 1449, "Concept"], [1458, 1462, "Concept"]]}