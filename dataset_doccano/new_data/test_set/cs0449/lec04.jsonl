{"id": 4, "segment": ["test_set", "labeled"], "course": "cs0449", "lec": "lec04", "text": "3\n\nIntroduction\nto C\n\nCS/COE 0449\nIntroduction to\nSystems Software\n\nLuis Oliveira\n(with content borrowed from wilkie and Vinicius Petrucci)\n\nOverview of C\nWhat You C is What You Get\n\n2\n\nC: The Universal Assembly Language\nC is not a \"very high-level\" language, nor\na \"big\" one, and is not specialized to any\nparticular area of application. But its\nabsence of restrictions and its generality\nmake it more convenient and effective\nfor many tasks than supposedly more\npowerful languages.\n- Kernighan and Ritchie\n\n\u2022 Allows writing programs to exploit\nunderlying features of the architecture\n- memory management, special\ninstructions, parallelism.\n3\n\nC: Relevance\n\u2022 From IEEE Spectrum:\n\u2022 https://spectrum.ieee.org/static/interacti\nve-the-top-programming-languages-2019\n\n\u2022 Still relatively popular...\n\u2022 Lots of legacy code.\n\u2022 Lots of embedded devices.\n\u2022 Python, Java, R, JS are all written in C.\n\n4\n\nTIOBE index\nTIOBE Programming Community index is an indicator of the popularity of programming languages\n\nhttps://www.tiobe.com/tiobe-index/\n\nCompilation\n\u2022 C is a compiled language.\n\u2022 Code is generally converted into machine code.\n\u2022 Java, by contrast, indirectly converts to machine code using a byte-code.\n\u2022 Python, by contrast to both, interprets the code.\n\n\u2022 The difference is in a trade-off about when and how to create a machine-level\nrepresentation of the source code.\n\u2022 A general C compiler will typically convert *.c source files into an intermediate *.o\nobject file. Then, it will link these together to form an executable.\n\u2022 Assembly is also part of this process, but it is done behind the scenes.\n\u2022 You can have gcc (a common C compiler) spit out the assembly if you want!\n\n6\n\nCompilation: Simple Overview - Step 1\n\u2022 The compiler takes source code (*.c\nfiles) and translates them into machine\ncode.\n\nhello.c\n\nhello.o\n\n\u2022 This file is called an \"object file\" and is\njust potentially one part of your overall\nproject.\n\u2022 The machine code is not quite an\nexecutable.\n\u2022 This object file is JUST representing the\ncode for that particular source file.\n\u2022 You may require extra stuff provided by\nthe system elsewhere.\n\n7\n\nCompilation: Simple Overview - Step 2\n\u2022 You may have multiple files.\n\u2022 They may reference each other.\n\u2022 For instance, one file may contain certain\ncommon functionality and then this is\ninvoked by your program elsewhere.\nhello.c\n\nhello.o\n\n\u2022 You break your project up into pieces\nsimilarly to your Java programs.\n\u2022 The compiler treats them\nindependently.\nutil.c\nCS/COE 0449 - Spring 2019/2020\n\nutil.o\n8\n\nCompilation: Simple Overview - Step 3\n\u2022 Then, each piece is\nmerged together to form\nthe executable.\n\u2022 This process is called\nlinking.\nhello.c\n\nhello.o\n\nutil.c\n\nutil.o\n\nhello\n\nstdio.o\nExternal Libraries\n\n\u2022 The name refers to how\nthe references to\nfunctions, etc, between\nfiles are now filled in.\n\u2022 Before this step... it is\nunclear where functions\nwill end up in the final\nexecutable.\n\u2022 Keep this in mind as we\nlook at memory and\npointers later!\n9\n\nIt's just a grinder.\n\u2022 In summary:\n\nhello.c\n\ncode goes in, sausage object\nfiles come out\n\nSome compilers output\nassembly and rely on an\nassembler to produce\nmachine code\nThese days, it's common\nfor the compiler itself to\nproduce machine code,\nor some kind of\nplatform-independent\nassembly code\n(typically: a bytecode)\n10\n\nCompilation vs. Interpretation\nC (compiled)\n\nPython (interpreted)\n\n\u2022 Compiler + Linker translates code\ninto machine code.\n\n\u2022 Interpreter is written in some\nlanguage (e.g. C) that is itself\ntranslated into machine code.\n\n\u2022 Machine code can be directly\nloaded by the OS and executed by\nthe hardware. Fast!!\n\u2022 New hardware targets require\nrecompilation in order to execute\non those new systems.\n\n\u2022 The Python source code is then\nexecuted as it is read by the\ninterpreter. Usually slower.\n\n\u2022 Very portable! No reliance on\nhardware beyond the interpreter.\n11\n\nCompilation vs. Virtual Targets (bytecode)\n\u2022 Java translates source to a \"byte code\" which is a made-up architecture, but it\nresembles machine code somewhat.\n\u2022 Technically, architectures could execute this byte code directly.\n\u2022 But these were never successful or practical.\n\n\u2022 Instead, a type of virtual machine simulates that pseudo-architecture. (interpretation)\n\u2022 Periodically, the fake byte code is translated into machine code.\n\u2022 This is a type of delayed compilation! Just-In-Time (JIT) compilation.\n\n\u2022 This is a compromise to either approach.\n\u2022 Surprisingly very competitive in speed.\n\u2022 I don't think the JVM-style JIT is going away any time soon.\n\n12\n\nC vs. Java\nC (C99)\n\nJava\n\nType of\nLanguage\n\nFunction Oriented\n\nObject Oriented\n\nProgramming\nUnit\n\nFunction\n\nClass = Abstract Data Type\n\nCompilation\n\ngcc hello.c - creates machine\nlanguage code\n\njavac Hello.java - creates Java virtual machine\nlanguage bytecode\n\nExecution\n\na.out - loads and executes\nprogram\n\njava Hello - interprets bytecodes\n\nManual (malloc, free)\n\nAutomatic (garbage collection)\n\nhello, world\n\nStorage\n\nFrom http://www.cs.princeton.edu/introcs/faq/c2java.html\n\n13\n\nC vs. Java\nC (C99)\nor\n\nComments\n\nJava\n\n... end of line\n\nor\n\n... end of line\n\nConstants\nPreprocessor Yes\n\nNo\n\nVariable\ndeclaration\n\nBefore you use it\n\nAt beginning of a block\n\nVariable\nnaming\nconventions\nAccessing a\nlibrary\nFrom http://www.cs.princeton.edu/introcs/faq/c2java.html\n\n14\n\nHello World\n\n15\n\nC Dialects\n\u2022 You will see a lot of different styles of C in the world at large.\n\u2022 The syntax has changed very little.\n\n\u2022 There have been a few different standard revisions.\n\u2022 C89 - ANSI / ISO C\n\u2022\n\n-\n\n-\n\n\u2022 C99 - Adds 'complex' numbers and single-line comments\n\u2022\n\n-\n\n\u2022 C11 - Newer than 99 (laughs in Y2K bug) starts to standardize\nUnicode and threading libraries.\n\u2022\n\n-\n\n\u2022 C18 - Minor refinement of C11. The current C standard.\n\u2022\n\n-\n\n\u2022 We will more or less focus on the C99 standard in our course.\n\u2022 I'll try to point out some newer things if they are relevant.\n16\n\nThe C Syntax\nNothing can be said to be certain, except death and C-like syntaxes.\n\n17\n\nThe C Pre-Processor\n\u2022 The C language is incredibly simplistic.\n\u2022 To add some constrained complexity, there is a macro language.\n\u2022 This code does not get translated to machine code, but to more code!\n\n18\n\nThe \"main\" function\n\n19\n\nDeclaring variables\n\n20\n\nCasting\n\n21\n\nInteger Sizes - Revisted: sizeof\n\n22\n\nInteger Sizes - Revisted\n\n23\n\nIntegers: Python vs. Java vs. C\nLanguage\nPython\nJava\nC\n\nsizeof(int)\n>=32 bits (plain ints), infinite (long ints)\n32 bits\nDepends on computer; 16 or 32 or 64\n\n\u2022 C:\n\u2022 integer type that target processor works with most efficiently\n\u2022 For modern C, this is generally a good-enough default choice.\n\n\u2022 Only guarantee:\n\u2022\n\u2265\n\u2022 Also,\n>= 16 bits,\n\u2022 All could be 64 bits\n\n\u2265\n\n\u2265\n\n>= 32 bits\n\n\u2022 Impacts portability between architectures\n24\n\nConstants\n\n25\n\nEnumerations\n\n26\n\nOperators: Java stole 'em from here\n\n27\n\nAugmented Operators\n\n-\n\n28\n\nExpressions: an expression of frustration!!\n\n\u2022 C often coerces (implicitly casts) integers when operating on them.\n\u2022 To remove ambiguity, expressions, such as\nmost accommodates that operation.\n\n, result in a type that\n\n\u2022 Specifically, C will coerce all inputs of binary operators to at least\nan\ntype.\n\u2022 You'll find that \"this is weird, but consistent\" is C's general motto\n\n29\n\nThe C Syntax: Control Flow\nOnce you C the program, you can BE the program.\n\n30\n\nControlling the flow: an intro to spaghetti\n\n31\n\nControlling the flow: Boolean Expressions\n\u2022 C does not have a Boolean type!\n\u2022 However, the C99 and newer standard library provides one in\n\n\u2022 The Boolean expressions are actually just an\n\ntype.\n\n\u2022 It is just the general, default type. Weird but consistent, yet again!\n\n32\n\nControlling the flow: Putting it Together\n\u2022\n\nstatements therefore take an\n\nand not a Boolean, as an expression.\n\n\u2022 If the expression is it is considered false.\n\u2022 Otherwise, it is considered true.\n\n33\n\nThrowing us all for a loop\n\n\u2022 Most loops (while, do) work exactly like Java.\n\u2022 Except, of course, the expressions are\n\ntyped, like\n\nstatements.\n\n\u2022 For loops only come in the traditional variety:\n\u2022\n\u2022 C89 does not allow variable declaration within:\n\u2022 ERROR:\n\n\u2022 However, C99 and newer does allow this. Please do it.\n\n\u2022 Loops have special statements that alter the flow:\n\u2022\n\u2022\n\nwill end the current iteration and start the next.\nwill exit the loop entirely.\n34\n\nLoop Refresher: While, Do-While, For Loops\n\n35\n\nTaking a break and switching it up\n\u2022 The\nproperly.\n\nstatement requires proper placement of\n\n\u2022 Starts at\nmatching expression and follows until it sees a\n\u2022 It will \"fall through\" other\nstatements if there is no\n\nto work\n.\nbetween them.\n\n\u2022 Sometimes fall through is used on purpose... but it's a bug 99% of the time :/\n36\n\nControl Flow: Summary\n\u2022 Conditional Blocks:\n\nNote: a\n\ncan be a { block }\n\n\u2022\n\u2022\n\u2022 The if statement can be chained:\n\n\u2022 Conventional Loops:\n\u2022\n\u2022\n37\n\nControl Flow: Summary\n\u2022 For Loops:\n\nNote: a\n\ncan be a { block }\n\n\u2022\n\u2022\n\u2022\n\n\u2022 Switch:\n\u2022\n\n\u2022\n38\n\nWhat's your function?\n\u2022 Familiar: Java is, once again, C-like\n\u2022 You declare the return type\nbefore the name.\n\u2022\n\nis used when there is nothing\nreturned\n\u2022 It is also used to explicitly denote\nthere being no arguments.\n\u2022 You SHOULD specify\ninstead\nof having an empty list.\n\n\u2022 Functions must be declared\nbefore they can be used.\n\u2022 We will look at how we divide\nfunctions up between files soon!\n\n39\n\nThis is all the structure you get, kid\n\u2022 C gives us a very simple method of defining aggregate data types.\n\u2022 The struct keyword can combine several data types together:\n\n40\n\nI don't like all that typing... So I'll... typedef it\n\u2022 To avoid typing the full name \"struct Song\" we can create a Song type instead.\n\u2022 The typedef keyword defines new types.\n\n41\n\nI don't like all that typing... So I'll... typedef it\n\u2022 You can also do this with integer types, for instance to define bool:\n\n\u2022 And\n\ntypes, although it won't complain if you mix/match them:\n\n\u2022 Now, functions can better illustrate they take an enum value:\n\u2022 Though, it accepts any integer and, yikes, any enum value without complaint!\n\n42\n\nThat's seriously all you get...\n\u2022 Unlike Java, C is not Object-Oriented and has no class instantiation.\n\u2022 That's C++!\n\n43\n\nGarbage in, garbage out: initialization\n\u2022 As we saw earlier, variables don't require initialization.\n\u2022 However, unlike Java, the variables do not have a default value.\n\u2022 Java will initialize integers to 0 if you do not specify.\n\u2022 C, on the other hand...\n\n\u2022 The default values for variables are undefined.\n\u2022 They could be anything.\n\u2022 The Operating System ultimately decides.\n\u2022 Generally, whatever memory is left over. Also known as \"garbage.\"\n\n\u2022 ALWAYS INITIALIZE YOUR VARIABLES\n44\n\nThe trouble is stacking up on us!\n\nQ: Hmm. Where is the value for 'x' coming from? Why?\n\n45\n\nWhere's that data coming from??\n\u2022 Every variable and data in your program technically has a location in which it\nlives.\n\u2022 In the previous nonsense example, the \"x\" variable was sharing the same space\nas the \"a\" variable from the other function.\n\u2022 The section of incremental memory called the stack, in this specific case.\n\u2022 This is not defined behavior of the language, but rather the OS.\n\n\u2022 C does not impose many rules on how memory is laid out and used.\n\u2022 In fact, it gets right out of the way and lets you fall flat on your face.\n\n\u2022 Now, we will take a deeper dive into...\n\nMEMORY\n46\n\n", "label": [[4547, 4555, "Concept"], [4601, 4609, "Concept"], [6153, 6161, "Concept"], [8851, 8859, "Concept"], [10862, 10870, "Concept"], [2764, 2773, "Concept"], [2855, 2864, "Concept"], [9112, 9121, "Concept"], [9196, 9205, "Concept"], [9788, 9797, "Concept"], [8919, 8925, "Concept"], [8919, 8930, "Concept"], [708, 714, "Concept"], [5095, 5103, "Concept"], [5161, 5169, "Concept"], [7998, 8006, "Concept"], [10667, 10675, "Concept"], [10791, 10799, "Concept"], [10838, 10846, "Concept"], [6177, 6186, "Concept"], [10113, 10122, "Concept"], [10181, 10190, "Concept"], [10332, 10341, "Concept"], [10520, 10529, "Concept"], [1035, 1046, "Concept"], [1681, 1692, "Concept"], [2116, 2127, "Concept"], [2518, 2529, "Concept"], [3288, 3299, "Concept"], [3843, 3854, "Concept"], [4304, 4315, "Concept"], [4336, 4347, "Concept"], [4639, 4650, "Concept"], [1056, 1073, "Concept"], [1382, 1390, "Concept"], [1632, 1640, "Concept"], [1725, 1733, "Concept"], [2433, 2441, "Concept"], [3168, 3176, "Concept"], [3357, 3365, "Concept"], [3368, 3374, "Concept"], [2643, 2650, "Concept"], [2035, 2046, "Concept"], [1456, 1467, "Concept"], [1848, 1859, "Concept"], [1973, 1984, "Concept"], [1514, 1524, "Concept"], [1954, 1964, "Concept"], [2606, 2616, "Concept"], [2890, 2900, "Concept"], [1110, 1122, "Concept"], [1168, 1180, "Concept"], [1925, 1937, "Concept"], [3123, 3135, "Concept"], [3195, 3207, "Concept"], [3396, 3408, "Concept"], [3493, 3505, "Concept"], [3510, 3522, "Concept"], [3978, 3990, "Concept"], [4262, 4274, "Concept"], [6105, 6117, "Concept"], [203, 211, "Concept"], [1528, 1536, "Concept"], [1655, 1663, "Concept"], [3078, 3086, "Concept"], [3246, 3254, "Concept"], [3413, 3424, "Concept"], [3744, 3755, "Concept"], [3826, 3837, "Concept"], [3274, 3282, "Concept"], [3876, 3884, "Concept"], [4754, 4762, "Concept"], [4139, 4154, "Concept"], [4729, 4744, "Concept"], [4331, 4334, "Concept"], [4465, 4468, "Concept"], [4724, 4744, "Concept"], [4455, 4458, "Concept"], [1616, 1619, "Concept"], [4652, 4655, "Concept"], [2701, 2719, "Concept"], [4619, 4637, "Concept"], [4854, 4860, "Concept"], [4862, 4866, "Concept"], [4880, 4898, "Concept"], [6050, 6064, "Concept"], [6050, 6055, "Concept"], [7998, 8018, "Concept"], [6192, 6199, "Concept"], [6231, 6237, "Concept"], [6329, 6335, "Concept"], [5063, 5072, "Concept"], [6698, 6707, "Concept"], [9833, 9837, "Concept"], [9894, 9898, "Concept"], [6731, 6740, "Concept"], [6782, 6791, "Concept"], [7070, 7079, "Concept"], [6772, 6791, "Concept"], [6800, 6811, "Concept"], [6938, 6949, "Concept"], [7337, 7348, "Concept"], [7460, 7471, "Concept"], [7882, 7893, "Concept"], [7063, 7079, "Concept"], [7192, 7204, "Concept"], [8604, 8616, "Concept"], [8748, 8760, "Concept"], [7369, 7381, "Concept"], [8688, 8700, "Concept"], [8447, 8459, "Concept"], [8531, 8543, "Concept"], [5463, 5466, "Concept"], [7979, 7982, "Concept"], [5476, 5481, "Concept"], [4517, 4520, "Concept"], [5000, 5003, "Concept"], [5493, 5496, "Concept"], [5755, 5758, "Concept"], [7398, 7401, "Concept"], [8048, 8051, "Concept"], [5555, 5558, "Concept"], [5684, 5687, "Concept"], [5658, 5661, "Concept"], [5617, 5624, "Concept"], [5629, 5648, "Concept"], [9347, 9353, "Concept"], [9495, 9501, "Concept"], [9451, 9458, "Concept"], [9549, 9556, "Concept"], [9632, 9639, "Concept"], [10077, 10091, "Concept"], [10137, 10151, "Concept"], [4880, 4887, "Concept"], [10052, 10059, "Concept"], [10064, 10071, "Concept"], [10484, 10491, "Concept"], [10919, 10924, "Concept"], [588, 594, "Concept"], [2936, 2942, "Concept"], [10448, 10454, "Concept"], [10901, 10907, "Concept"], [11055, 11061, "Concept"], [11205, 11211, "Concept"], [10389, 10405, "Concept"], [3553, 3555, "Concept"], [11012, 11014, "Concept"], [893, 904, "Concept"]]}