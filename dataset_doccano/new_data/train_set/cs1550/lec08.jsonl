{"id": 28, "segment": ["train_set", "labeled"], "course": "cs1550", "lec": "lec08", "text": "Introduction to Operating Systems\nCS/COE 1550\nSpring 2022\n\nSherif Khattab\nksm73@pitt.edu\n(Some slides are from Silberschatz, Galvin and Gagne \u00a92013)\n\nAnnouncements\n\u2022 Upcoming deadlines\n\u2022 Homework 4 is due next Monday 2/14\n\u2022 Project 1 due on 2/18\n\nCS/COE 1550 - Operating Systems - Sherif Khattab\n\n2\n\nPrevious lecture ...\n\u2022 It is easy to make mistakes when using semaphores\n\n\u2022 Solution: Mutex and Condition Variables\n\nCS/COE 1550 - Operating Systems - Sherif Khattab\n\n3\n\nMuddiest Points\n\nCS/COE 1550 - Operating Systems - Sherif Khattab\n\n4\n\nProblem of the Day\nReaders & Writers\n\u2022\n\nMany processes that may read and/or write\n\n\u2022\n\nOnly one writer allowed at any time\n\n\u2022\n\nMany readers allowed, but not while a process is writing\n\n\u2022\n\nReal-world Applications\n\u2022\n\nDatabase queries\n\n\u2022\n\nWe have this problem in Project 1\n\nCS/COE 1550 - Operating Systems - Sherif Khattab\n\n5\n\nSemaphore-based Solution\nShared variables\nint nreaders;\nSemaphore mutex(1), writing(1);\n\nReader process\n\nWriter process\n\n...\nmutex.down();\nnreaders += 1;\nif (nreaders == 1) // wait if\nwriting.down(); // 1st reader\nmutex.up();\n// Read some stuff\nmutex.down();\nnreaders -= 1;\nif (nreaders == 0)\n// signal if\nwriting.up();\n// last reader\nmutex.up();\n...\n\n...\nwriting.down();\n// Write some stuff\nwriting.up();\n...\n\nCS/COE 1550 - Operating Systems - Sherif Khattab\n\n6\n\nSolution Tracing\n\u2022 enterRead\n\nReader process\n...\nmutex.down();\nnreaders += 1;\nif (nreaders == 1) // wait if\nwriting.down(); // 1st reader\nmutex.up();\n// Read some stuff\nmutex.down();\nnreaders -= 1;\nif (nreaders == 0)\n// signal if\nwriting.up(); // last reader\nmutex.up();\n...\nCS/COE 1550 - Operating Systems - Sherif Khattab\n\n7\n\nSolution Tracing\n\u2022 read\n\nReader process\n...\nmutex.down();\nnreaders += 1;\nif (nreaders == 1) // wait if\nwriting.down(); // 1st reader\nmutex.up();\n// Read some stuff\nmutex.down();\nnreaders -= 1;\nif (nreaders == 0)\n// signal if\nwriting.up(); // last reader\nmutex.up();\n...\nCS/COE 1550 - Operating Systems - Sherif Khattab\n\n8\n\nSolution Tracing\n\u2022 doneRead\n\nReader process\n...\nmutex.down();\nnreaders += 1;\nif (nreaders == 1) // wait if\nwriting.down(); // 1st reader\nmutex.up();\n// Read some stuff\nmutex.down();\nnreaders -= 1;\nif (nreaders == 0)\n// signal if\nwriting.up(); // last reader\nmutex.up();\n...\nCS/COE 1550 - Operating Systems - Sherif Khattab\n\n9\n\nWriter Events\n\u2022 enterWrite\n\nWriter process\n...\nwriting.down();\n// Write some stuff\nwriting.up();\n...\n\nCS/COE 1550 - Operating Systems - Sherif Khattab\n\n10\n\nWriter Events\n\u2022 write\n\nWriter process\n...\nwriting.down();\n// Write some stuff\nwriting.up();\n...\n\nCS/COE 1550 - Operating Systems - Sherif Khattab\n\n11\n\nWriter Events\n\u2022 doneWrite\n\nWriter process\n...\nwriting.down();\n// Write some stuff\nwriting.up();\n...\n\nCS/COE 1550 - Operating Systems - Sherif Khattab\n\n12\n\nSequence 1\n\u2022 W0 enterWrite\nReader process\n\n\u2022 W0 write\n\n...\nmutex.down();\nnreaders += 1;\nif (nreaders == 1) // wait if\nwriting.down(); // 1st reader\nmutex.up();\n// Read some stuff\nmutex.down();\nnreaders -= 1;\nif (nreaders == 0)\n// signal if\nwriting.up();\n// last reader\nmutex.up();\n...\n\n\u2022 R0 enterRead\n\u2022 R1 enterRead\n\u2022 R2 enterRead\n\u2022 W0 doneWrite\n\u2022 R2 read\n\u2022 W1 enterWrite\n\n\u2022 R2 doneRead\n\u2022 W1 write\n\nWriter process\n...\nwriting.down();\n// Write some stuff\nwriting.up();\n...\n\nCS/COE 1550 - Operating Systems - Sherif Khattab\n\n13\n\n\u2022\n\u2022\n\u2022\n\u2022\n\u2022\n\u2022\n\u2022\n\u2022\n\u2022\n\u2022\n\u2022\n\u2022\n\nSequence 2\nR0 enterRead\nR0 read\nR1 enterRead\nR1 read\nW0 enterWrite\nR2 enterRead\nR2 read\nR2 doneRead\nR1 doneRead\nR0 doneRead\nW0 write\nW0 doneWrite\n\nReader process\n...\nmutex.down();\nnreaders += 1;\nif (nreaders == 1) // wait if\nwriting.down(); // 1st reader\nmutex.up();\n// Read some stuff\nmutex.down();\nnreaders -= 1;\nif (nreaders == 0)\n// signal if\nwriting.up();\n// last reader\nmutex.up();\n...\n\nWriter process\n...\nwriting.down();\n// Write some stuff\nwriting.up();\n...\nCS/COE 1550 - Operating Systems - Sherif Khattab\n\n14\n\nSolution using Mutex and Condition Variables\n\nCS/COE 1550 - Operating Systems - Sherif Khattab\n\n15\n\n", "label": [[559, 576, "Concept"], [952, 966, "Concept"], [1357, 1371, "Concept"], [1680, 1694, "Concept"], [2007, 2021, "Concept"], [2794, 2808, "Concept"], [3466, 3480, "Concept"], [968, 982, "Concept"], [2333, 2347, "Concept"], [2484, 2498, "Concept"], [2639, 2653, "Concept"], [3166, 3180, "Concept"], [3712, 3726, "Concept"], [888, 904, "Concept"], [863, 872, "Concept"], [919, 928, "Concept"], [386, 391, "Concept"], [929, 934, "Concept"], [988, 993, "Concept"], [1077, 1082, "Concept"], [1108, 1113, "Concept"], [1198, 1203, "Concept"], [1376, 1381, "Concept"], [1465, 1470, "Concept"], [1496, 1501, "Concept"], [1586, 1591, "Concept"], [1699, 1704, "Concept"], [1788, 1793, "Concept"], [1819, 1824, "Concept"], [1909, 1914, "Concept"], [2026, 2031, "Concept"], [2115, 2120, "Concept"], [2146, 2151, "Concept"], [2236, 2241, "Concept"], [2826, 2831, "Concept"], [2915, 2920, "Concept"], [2946, 2951, "Concept"], [3036, 3041, "Concept"], [3485, 3490, "Concept"], [3574, 3579, "Concept"], [3605, 3610, "Concept"], [3695, 3700, "Concept"], [3854, 3859, "Concept"], [396, 415, "Concept"], [3864, 3883, "Concept"], [863, 887, "Concept"], [3839, 3883, "Concept"], [1346, 1355, "Concept"], [3058, 3067, "Concept"], [3073, 3082, "Concept"], [3088, 3097, "Concept"], [3333, 3342, "Concept"], [3354, 3363, "Concept"], [3389, 3398, "Concept"], [604, 608, "Concept"], [1092, 1096, "Concept"], [1480, 1484, "Concept"], [1674, 1678, "Concept"], [1803, 1807, "Concept"], [2130, 2134, "Concept"], [2930, 2934, "Concept"], [3118, 3122, "Concept"], [3346, 3350, "Concept"], [3367, 3371, "Concept"], [3402, 3406, "Concept"], [3589, 3593, "Concept"], [1997, 2005, "Concept"], [3145, 3153, "Concept"], [3410, 3418, "Concept"], [3422, 3430, "Concept"], [3434, 3442, "Concept"], [2321, 2331, "Concept"], [2783, 2793, "Concept"], [3128, 3138, "Concept"], [3375, 3385, "Concept"], [616, 621, "Concept"], [1238, 1243, "Concept"], [2371, 2376, "Concept"], [2477, 2482, "Concept"], [2522, 2527, "Concept"], [2677, 2682, "Concept"], [2815, 2820, "Concept"], [3159, 3164, "Concept"], [3204, 3209, "Concept"], [3446, 3451, "Concept"], [3750, 3755, "Concept"], [2628, 2637, "Concept"], [3103, 3112, "Concept"], [3455, 3464, "Concept"], [1186, 1197, "Concept"], [1574, 1585, "Concept"], [1897, 1908, "Concept"], [2224, 2235, "Concept"], [3024, 3035, "Concept"], [3683, 3694, "Concept"], [754, 770, "Concept"]]}